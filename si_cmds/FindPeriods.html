<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<!-- saved from url=(0024)http://docs.autodesk.com -->
<html>
   <head>
<link href="../style/prettify.css" type="text/css" rel="stylesheet" />
<script type="text/javascript" src="../scripts/prettify.js"></script><script src="../scripts/lib/jquery-1.9.1.min.js" type="text/javascript"></script><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><script type="text/javascript" src="../scripts/utils/adsk.redirect.js"></script>
      <title>FindPeriods</title>
   
</head>
   <body height="100%"><div class="body_content" id="body-content"><style>
/*  These settings override ones in the default stylesheets
	used by the merged files that cause problems in combination
	with the standard HTML help styles and page templates. */

div, div.example, div.tip {
	 margin:0;
}

td.example {
	background: inherit;
}

/* This fixes a problem with nested pre blocks on an example page */
pre pre {
	display:block;
	padding:0;
	border-style:none;
}
</style><link rel="stylesheet" href="si_cmds/css/en.css" type="text/css" /><script>$(document).ready(function() { yepnope.injectJs("./si_cmds/lib/utils.js"); });</script><script>$(document).ready(function() { yepnope.injectJs("./scripts/ac_common.js"); });</script><script type="text/javascript">var reflinkid = "si_cpp"; var reflinkdata = new Array(); function closeRefLinkDiv() { }; $(document).on('click', function() { closeRefLinkDiv(); } );</script><script>$(document).ready(function() { yepnope.injectJs("./scripts/multireflink.js"); });</script><script>$(document).ready(function () { prettyPrint(); } );</script><script>$("div#WidgetFloaterPanels,link[href*='microsofttranslator.com'],script[src*='microsofttranslator.com'],script[src*='bing.com']").remove();</script><script type='text/javascript'>$("div#navigation,div#breadcrumbs,div#banner").attr("translate","no"); var mtLocation = ((location && location.href && location.href.indexOf('https') == 0)?'https://ssl.microsofttranslator.com':'http://www.microsofttranslator.com')+'/ajax/v3/WidgetV3.ashx?siteData=y5CYlxTRD0znCzRLDwX0Wy7-g1EdC1XA4dSC-Y1LtaeScyli8_Ps5jPKqTr4xKxMI0OOUfkDplvX3uxN0JnPclebSYW8_J1HBzf4VLQEzQ8M4PsYXF_cMyp1Oumaetky&category=5297189e-446b-459e-ae1d-9d0360400781_tech&ctf=True&ui=true&settings=Manual&from=en&hidelanguages='; yepnope.injectJs(mtLocation, function() {}, { charset:'utf-8', type:'text/javascript' } );</script><script type="text/javascript">
 </script><!-- begin MT -->
            
            <div id='MicrosoftTranslatorWidget' class='Dark' style='position:absolute;right:20px;top:5px;z-index:100;color:white;background-color:#555555;height:58px;overflow:hidden'></div><div id="reflinkdiv" style="display:none; font-family: 'RobotoRegular', Arial, Tahoma, sans-serif; visibility:hidden; position:absolute; z-index:40001; padding:5px; border-style:solid; border-width:1px; border-color:#666666; background-color:#dfdfdf; overflow:visible"></div>
      <div>
         <div class="head">
            <h1>FindPeriods</h1>
         </div>

<h2 class="pagehead">FindPeriods</h2>

<h3>Introduced</h3>
<div><p>v1.5</p></div>

<h3>Description</h3>
<div><p>
Finds the periods of animated parameters. If the first algorithm is 
chosen, one period is computed for the overall orientation of the input objects. 
This period corresponds to the minimal time offset to apply to the input objects 
so as to get the same overall orientation as that of the start time. In this case, 
the input objects must be animated in rotation for FindPeriods to work. <br /><br />
If the second algorithm is chosen, one period is computed for each input object. 
These periods correspond to the minimal time offsets to apply to each input objects 
so they take the same value as that at the start time. In this case the input objects 
must be animated parameters for FindPeriods to work. <br /><br />
To use this command, you must select the objects/animated parameters for which you 
want to find periods. The animation of these objects will then be analyzed between 
the Start and End Frame to compute the periods.
</p></div>

<h3>Scripting Syntax</h3>
<div><p><table>
	<tr>
		<td class="example"><pre>oReturn = FindPeriods( InputObjs, [Algorithm], StartFrame, EndFrame, Minimum Period Length );</pre>		</td>	</tr>
</table>
</p></div>

<h3>Return Value</h3>
<div><p>
Returns the periods of animated parameters. If no period is found in the range defined by both 
the minimum length and the animation length (End Frame - Start Frame), FindPeriods returns 0. 
</p></div>

<h3>Parameters</h3>
<div><p><table cellpadding="5" cellspacing="5">
	<tr>
		<th title="Name of the parameter">Parameter		</th>
		<th title="Data type">Type		</th>
		<th title="Description of the parameter">Description		</th>
	</tr>
	<tr>
		<td class="name">InputObjs		</td>
		<td><a href="#!/url=./files/String.htm">String</a>		</td>
		<td>
<a href="#!/url=./files/listexpr.htm">Objects</a> to use to find a cyle.			<p class="cell"><span class="hilite">Default Value: </span>
Current selected objects			</p>
		</td>
	</tr>
	<tr>
		<td class="name">Algorithm		</td>
		<td><a href="#!/url=./files/Long.htm">Long</a>		</td>
		<td>
Algorithm to choose from			<p class="cell"><span class="hilite">Default Value: </span>
1			</p>
			<table cellpadding="5" cellspacing="5">
				<tr>
					<td>						<p class="cell"><span class="hilite">Possible Values: </span>						</p>					</td>
					<td>						<p class="cell"><span class="hilite">Description: </span>						</p>					</td>
				</tr>
				<tr>
					<td class="name">0					</td>
					<td>Works for rotations only.					</td>
				</tr>
				<tr>
					<td class="name">1					</td>
					<td>Works for any animated parameter.					</td>
				</tr>
			</table>
		</td>
	</tr>
	<tr>
		<td class="name">StartFrame		</td>
		<td><a href="#!/url=./files/Double.htm">Double</a>		</td>
		<td>
 Frame at which the periods suposedly starts.			<p class="cell"><span class="hilite">Default Value: </span>
0			</p>
		</td>
	</tr>
	<tr>
		<td class="name">EndFrame		</td>
		<td><a href="#!/url=./files/Double.htm">Double</a>		</td>
		<td>
 Upper frame boundary where to look for a period.			<p class="cell"><span class="hilite">Default Value: </span>
0			</p>
		</td>
	</tr>
	<tr>
		<td class="name">Minimum Period Length		</td>
		<td><a href="#!/url=./files/Long.htm">Long</a>		</td>
		<td>
 Minimum length of the periods looked for (common estimate).			<p class="cell"><span class="hilite">Default Value: </span>
1			</p>
		</td>
	</tr>
</table>
</p></div>

<h3>Examples</h3>
<div><p><h4>VBScript Example</h4><div class="example"><table>
<tr>
<td class="example"><pre class="vbscript">' This example creates a simple skeleton and demonstrates using FindPeriods to
' detect cycles in its animation.  In the first case, we have a simple rotation
' animation.  In the second, we show cycle detection on an arbitrary parameter
' (we chose bone length).
NewScene , False
' Create an object for us to use for this example.
Create2DSkeleton 0, 0, 0, 0, 0, 3, 0, 1, 0, 0, oBone
'
' 1) Create an animation in which a cycle occurs for the rotation of a bone.
'
SaveKey oBone &amp; "/kine.local.rotx,kine.local.roty,kine.local.rotz", 1
Rotate oBone, 0, 0, 145, siRelative, siLocal, siObj, siXYZ
SaveKey oBone &amp; "/kine.local.rotx,kine.local.roty,kine.local.rotz", 10
Rotate oBone, 0, 0, 215, siRelative, siLocal, siObj, siXYZ
SaveKey oBone &amp; "/kine.local.rotx,kine.local.roty,kine.local.rotz", 23
Rotate oBone, 0, 0, 50, siRelative, siLocal, siObj, siXYZ
SaveKey oBone &amp; "/kine.local.rotx,kine.local.roty,kine.local.rotz", 30
' Store the animation as an action and instantiate a clip in the mixer.
set oAction = StoreAction( , oBone &amp; "/kine.local.rotx,kine.local.roty,kine.local.rotz", _
				2, "BoneRot", True, 1, 30)
set oClip = AddClip( "Scene_Root", oAction, , , 30 )
' Find the period of bone rotation (algorithm 0) from start of clip.
clipStart = GetValue( oClip &amp; ".actionclip.timectrl.resin" )
clipEnd = GetValue( oClip &amp; ".actionclip.timectrl.resout" )
Periods = FindPeriods( oBone, 0, clipStart, clipEnd, 1 )
LogMessage "Period for bone rotation: " &amp; Periods(0) &amp; " frames"
'
' 2) Animate the bone length to be periodic.
'
SaveKey oBone &amp; ".bone.length",  1, 3
SaveKey oBone &amp; ".bone.length",  5, 4
SaveKey oBone &amp; ".bone.length",  9, 3
SaveKey oBone &amp; ".bone.length", 13, 4
SaveKey oBone &amp; ".bone.length", 17, 3
SaveKey oBone &amp; ".bone.length", 21, 4
SaveKey oBone &amp; ".bone.length", 25, 3
' Store the animation as an action and instantiate a clip in the mixer.
set oAction = StoreAction( , oBone &amp; ".bone.length", 2, "BoneLength", True, 1, 24)
set oClip = AddClip( "Scene_Root", oAction, , , 1 )
' Find the period of bone length (algorithm 1) from start of clip.
clipStart = GetValue( oClip &amp; ".actionclip.timectrl.resin" )
clipEnd = GetValue( oClip &amp; ".actionclip.timectrl.resout" )
Periods = FindPeriods("bone.bone.length", 1, clipStart, clipEnd, 1)
LogMessage "Period for bone length: " &amp; Periods(0) &amp; " frames"
' Compute the number of cycles of the animation.
NumPeriods = ((clipEnd - clipStart) / Periods(0))
LogMessage "Number of cycles: " &amp; NumPeriods
' Running this script should log the following:
' ---------------------------------------------
'INFO : "Period for bone rotation: 22 frames"
' &lt;bunch of logged commands, and then:&gt;
'INFO : "Period for bone length: 8 frames"
'INFO : "Number of cycles: 3"</pre></td></tr>
</table>
</div></p></div>

      <div class="footer-block"><a href="../html/ac.cmtdialog.htm" class="comments-anchor" target="_blank"><span class="comments-link">Please send us your comment about this page</span></a></div><br /></div>
   </div></body>
</html>
