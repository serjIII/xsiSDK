<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<!-- saved from url=(0024)http://docs.autodesk.com -->
<html>
   <head>
<link href="../../../style/prettify.css" type="text/css" rel="stylesheet" />
<script type="text/javascript" src="../../../scripts/prettify.js"></script><script src="../../../../../../../scripts/lib/jquery-1.9.1.min.js" type="text/javascript"></script><meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1" /><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><script type="text/javascript" src="../../../scripts/utils/adsk.redirect.js"></script>
      <title>XSIA</title>
   
</head>
   <body height="100%"><div class="body_content" id="body-content"><style>
/*  These settings override ones in the default stylesheets
	used by the merged files that cause problems in combination
	with the standard HTML help styles and page templates. */

div, div.example, div.tip {
	 margin:0;
}

td.example {
	background: inherit;
}

/* This fixes a problem with nested pre blocks on an example page */
pre pre {
	display:block;
	padding:0;
	border-style:none;
}
</style><link rel="StyleSheet" href="examples/Addons/XSIA/doc/shared/examples.css" type="text/css" /><script>$(document).ready(function() { yepnope.injectJs("./examples/Addons/XSIA/doc/shared/utils.js"); });</script><script type="text/javascript">
			function runExample(mode)
			{
				if (mode == 1) {
					g_app.XSIA_Export();
				} else if (mode==2) {
					g_app.XSIA_Import();
				}
			}
		</script><script>$(document).ready(function() { yepnope.injectJs("./examples/Addons/scripts/ac_common.js"); });</script><script type="text/javascript">var reflinkid = "si_cpp"; var reflinkdata = new Array(); function closeRefLinkDiv() { }; $(document).on('click', function() { closeRefLinkDiv(); } );</script><script>$(document).ready(function() { yepnope.injectJs("./examples/Addons/scripts/multireflink.js"); });</script><script>$(document).ready(function () { prettyPrint(); } );</script><script>$("div#WidgetFloaterPanels,link[href*='microsofttranslator.com'],script[src*='microsofttranslator.com'],script[src*='bing.com']").remove();</script><script type='text/javascript'>$("div#navigation,div#breadcrumbs,div#banner").attr("translate","no"); var mtLocation = ((location && location.href && location.href.indexOf('https') == 0)?'https://ssl.microsofttranslator.com':'http://www.microsofttranslator.com')+'/ajax/v3/WidgetV3.ashx?siteData=y5CYlxTRD0znCzRLDwX0Wy7-g1EdC1XA4dSC-Y1LtaeScyli8_Ps5jPKqTr4xKxMI0OOUfkDplvX3uxN0JnPclebSYW8_J1HBzf4VLQEzQ8M4PsYXF_cMyp1Oumaetky&category=5297189e-446b-459e-ae1d-9d0360400781_tech&ctf=True&ui=true&settings=Manual&from=en&hidelanguages='; yepnope.injectJs(mtLocation, function() {}, { charset:'utf-8', type:'text/javascript' } );</script><script type="text/javascript">
 </script><!-- begin MT -->
            
            <div id='MicrosoftTranslatorWidget' class='Dark' style='position:absolute;right:20px;top:5px;z-index:100;color:white;background-color:#555555;height:58px;overflow:hidden'></div><div id="reflinkdiv" style="display:none; font-family: 'RobotoRegular', Arial, Tahoma, sans-serif; visibility:hidden; position:absolute; z-index:40001; padding:5px; border-style:solid; border-width:1px; border-color:#666666; background-color:#dfdfdf; overflow:visible"></div>
      <div>
         <div class="head">
            <h1>XSIA</h1>
         </div>

	<div class="body"><a name="top"></a>
	<img class="netview" src="netview_XSIA.jpg" style="float:left;padding-right:6px;" />
	<h1>XSIA Importer/Exporter</h1>
	<p>This JScript example demonstrates writing your own importer/exporter for scene summary data using a XML file format.
		The example makes use of the JScript objects, which can be used to emulate object oriented behaviour.
		<br /><br />
		Scene summary files represent a textual (human readable) description of the scene, including referenced models with their
		resolutions and deltas, groups, layers and passes. These files can be generated by the plugin to transport scenes or
		parts of scenes, to rebuild scenes from their basic elements or to just change key scene data such as paths of models.<br />
		Furthermore having an ASCII scene description makes it possible to generate scenes externally, switch models externally etc...
		<br /><br />
		<strong>Note:</strong> This example implements its own XML parsing mechanism, it does not use parsers such as Microsoft DOM, and
		there are limitations to the XML file format used.
	</p>

	<h2>Example Files</h2>
		<table>
			<tr>
				<td><strong>Location</strong></td>
				<td><span class="installPath"></span></td>
			</tr>
			<tr>
				<td><strong>Files</strong></td>
				<td><div class="examplefile">xsia_plugin.js</div></td>
			</tr>
		</table>


	<a name="build"></a><h2>Running the Example</h2>

	<div id="toinstall" style="display:none">
	<p class="proc-head">To install the example</p>
	<ul>
	<li><p>Connect to the Softimage SDK workgroup at <span class="workgroupPath">%XSISDK_ROOT%\examples\workgroup</span>.</p>
		<ol>
		<li>In the <strong>Plug-in Manager</strong>, click the <strong>Workgroups</strong> tab.</li>
		<li>Click <strong>File</strong> and then click <strong>Connect</strong>.</li>
		<li>In the <strong>Connect to Workgroup</strong> dialog box, click <img src="..\..\doc\shared\bBrowse.gif" />, locate the workgroup folder and then click <strong>Select</strong>.</li>
		</ol>
	</li>
	</ul>

	<p class="proc-head">To view the help page for an example</p>

	<ul>
	<li>Do one of the following:</li>
	<ul>
	<li>In the Plug-in Tree, expand the SDK examples workgroup, right-click the example add-on and then click <strong>Help</strong>.
	</li>
	<li>
	Open a Net View and click <img style="position:relative;bottom:-6px;" src="..\..\doc\shared\xsiweb.png" /> to go to Softimage Net local. In the top navigation bar, click <strong>add-ons</strong>, and then click the SDK example add-on.
	</li>
	</ul>
	</ul>

	</div>

	<div>
	<p class="proc-head">To run the exporter example</p>
	<ol>
	<li>
		Select <strong>Referenced Models</strong>, <strong>Groups</strong>, <strong>Layers</strong> and/or <strong>Passes</strong>.
	</li>

	<p><li>On the main Softimage menubar, click on <strong>File</strong>, then on <strong>Export</strong> and finally on <strong><span class="Export_XSIA" title="Click to run the example">Export XSIA</span></strong>.
	</li></p>

	<li>
		<p>
			Input the <strong>filename</strong> in the file-save dialog and hit <strong>OK</strong>.
			</p>
	</li>
	</ol>


	<p><strong>Notes</strong></p>
	<ul>
	<li>
		<p>The xsia exporter outputs the an ASCII file looking like this:</p>
		<ul>
			<pre>
&#60;?xml version="1.0" encoding="iso-8859-1"?&#62;
&#60;xsia_file type="AssetSummaryFile" xsi_version="5.0.2005.0920" syntax_version="1.0"&#62;
  &#60;models&#62;
	&#60;model name="Bobby" active_resolution="1"&#62;
	  &#60;resolutions&#62;
		&#60;resolution name="Offloaded" filename=""&#62;&#60;/resolution&#62;
		&#60;resolution name="res1" filename="C:/XSI_Project/Models/Bobby.emdl"&#62;&#60;/resolution&#62;
	  &#60;/resolutions&#62;
	  &#60;deltas&#62;
		&#60;delta name="Delta" target="test" persist_modif="479" filename="C:/XSI_Project/Deltas/bobby_Delta.delta" status="2"&#62;&#60;/delta&#62;
	  &#60;/deltas&#62;
	&#60;/model&#62;
  &#60;/models&#62;
  &#60;layers&#62;
	&#60;layer name="test" filename="e:/temp/layer_test.Preset" members=""&#62;&#60;/layer&#62;
  &#60;/layers&#62;
  &#60;passes&#62;
	&#60;pass name="Shadow" filename="e:/temp/pass_Shadow.Preset"&#62;
	  &#60;partitions&#62;
		&#60;partition name="Background_Objects_Partition" members="Bobby.cube"&#62;&#60;/partition&#62;
		&#60;partition name="Partition" members=""&#62;&#60;/partition&#62;
		&#60;partition name="Background_Lights_Partition" members="light"&#62;&#60;/partition&#62;
	  &#60;/partitions&#62;
	&#60;/pass&#62;
  &#60;/passes&#62;
&#60;/xsia_file&#62;</pre>
		</ul>
	</li>
	<li>
		The exporter also creates all of the preset files necessary in the same location as the xsia file.
	</li>
	</ul>
	</div>

	<a name="build"></a><h2>Running the importer example</h2>


	<div>
	<p class="proc-head">To run the importer example</p>
	<ol>
	<li>On the main Softimage menubar, click on <strong>File</strong>, then on <strong>Import</strong> and finally on <strong><span class="Import_XSIA" title="Click to run the example">Import XSIA</span></strong>.
	</li>

	<li>
		<p>
			Input the <strong>filename</strong> in the file-save dialog and hit <strong>OK</strong>.
			</p>
	</li>
	</ol>


	<p><strong>Notes</strong></p>
	<ul>
	<li>
		<p>The importer generates each item described in the XSIA file.</p>
	</li>
	<li>
		If you run the import of the same file multiple times, you will receive multiple copies of the same item.
	</li>
	</ul>
	</div>

	<a name="build"></a><h2>The XSIA object model</h2>

	<div>
	<p class="proc-head">Retrieving a XSIA object</p>
	<ul>
	<li>
		In scripting, call the <strong>XSIA_GetXSIAObject</strong>. It returns a XSIA object.
	</li>
	</ul>

	<p class="proc-head">Object Model Description</p>
	<ul>
	<li>
		<p><strong>XSIA Object</strong></p>
		The XSIA object respresents the content of a xsia file. It can contain data relevant for referenced models, groups, layers and passes.
		<br />Its methods are:
		<ul>
			<li>
				<strong>Clear()</strong> Resets/Clears the object.
			</li>
			<li>
				<strong>AddItemFromScene(item)</strong> - Adds a description of an item to the xsia, where item can be a referenced model, a group, a layer or a pass.
			</li>
			<li>
				<strong>AddItemsFromCollection(coll)</strong> - Adds descriptions of items to the xsia, where coll is a XSIACollection of items.
			</li>
			<li>
				<strong>AddItemsFromArray(arr)</strong> - Adds descriptions of items to the xsia, where arr is a JavaScript Array of items.
			</li>
			<li>
				<strong>WriteToFile(filename)</strong> - Outputs the descriptions of the XSIA object to a file with the given filename.
			</li>
			<li>
				<strong>ReadFromFile(file)</strong> - Adds a description of all item of a given XSIA file to the XSIA object.
			</li>
			<li>
				<strong>BuildInScene(parent)</strong> - Creates all items described in the XSIA object in the scene. parent is typically the current Scene_Root.
			</li>
		</ul>
		Its properties are:
		<ul>
			<li>
				<strong>type</strong> - A string storing "XSIA".
			</li>
			<li>
				<strong>fso</strong> - An instance of the ActiveXObject "Scripting.FileSystemObject".
			</li>
			<li>
				<strong>models</strong> - A XSICollection storing XSIAModel objects.
			</li>
			<li>
				<strong>groups</strong> - A XSICollection storing XSIAGroup objects.
			</li>
			<li>
				<strong>layers</strong> - A XSICollection storing XSIAGroup objects (for layers though).
			</li>
			<li>
				<strong>passes</strong> - A XSICollection storing XSIAPass objects.
			</li>
			<li>
				<strong>includes</strong> - A XSICollection storing nested XSIA objects.
			</li>
		</ul>
	</li>
	<li>
		<p><strong>XSIAModel Object</strong></p>
		The XSIAModel object respresents the description of a referenced model.
		<br />Its methods are:
		<ul>
			<li>
				<strong>Clear()</strong> Resets/Clears the object.
			</li>
			<li>
				<strong>SetFromScene(model)</strong> - Sets the description data of the XSIAModel based on the given model in the scene.
			</li>
			<li>
				<strong>BuildInScene(parent)</strong> - Builds the model in the scene based on the description of the XSIAModel.
			</li>
		</ul>
		Its properties are:
		<ul>
			<li>
				<strong>type</strong> - A string storing "XSIAModel".
			</li>
			<li>
				<strong>name</strong> - The name of the model.
			</li>
			<li>
				<strong>active_resolution</strong> - The index of the active resolution of the referenced model.
			</li>
			<li>
				<strong>scnPtr</strong> - The object in the scene (if existent)
			</li>
			<li>
				<strong>resolutions</strong> - A XSICollection storing XSIAResolution objects.
			</li>
			<li>
				<strong>deltas</strong> - A XSICollection storing XSIADelta objects.
			</li>
		</ul>
	</li>
	<li>
		<p><strong>XSIAResolution Object</strong></p>
		The XSIAResolution object respresents the description of a resolution of a referenced model.
		<br />Its methods are:
		<ul>
			<li>
				<strong>Clear()</strong> Resets/Clears the object.
			</li>
			<li>
				<strong>SetFromScene(index)</strong> - Sets the description data of the XSIAResolution based on the given index (on its parent model).
			</li>
			<li>
				<strong>BuildInScene(model)</strong> - Builds the resolution on the given model.
			</li>
		</ul>
		Its properties are:
		<ul>
			<li>
				<strong>type</strong> - A string storing "XSIAResolution".
			</li>
			<li>
				<strong>name</strong> - The name of the resolution.
			</li>
			<li>
				<strong>filename</strong> - The filename of the EMDL used for this resolution.
			</li>
		</ul>
	</li>
	<li>
		<p><strong>XSIADelta Object</strong></p>
		The XSIADelta object respresents the description of a delta object on a referenced model.
		<br />Its methods are:
		<ul>
			<li>
				<strong>Clear()</strong> Resets/Clears the object.
			</li>
			<li>
				<strong>SetFromScene(delta)</strong> - Sets the description data of the XSIADelta based on the given delta in the scene.
			</li>
			<li>
				<strong>BuildInScene(model)</strong> - Builds the delta in the scene based on the description of the XSIADelta as a child of the given model.
			</li>
		</ul>
		Its properties are:
		<ul>
			<li>
				<strong>type</strong> - A string storing "XSIADelta".
			</li>
			<li>
				<strong>name</strong> - The name of the delta.
			</li>
			<li>
				<strong>filename</strong> - The filename of the delta.
			</li>
			<li>
				<strong>scnPtr</strong> - The object in the scene (if existent)
			</li>
			<li>
				<strong>persist_modif</strong> - The value of the persist_modifications on the delta.
			</li>
			<li>
				<strong>target</strong> - The name of the target model of the delta.
			</li>
			<li>
				<strong>status</strong> - The value of the 'status' of the delta (offloaded/loaded)
			</li>
		</ul>
	</li>
	<li>
		<p><strong>XSIAGroup Object</strong></p>
		The XSIAGroup object respresents the description of a group/layer/partition.
		<br />Its methods are:
		<ul>
			<li>
				<strong>Clear()</strong> Resets/Clears the object.
			</li>
			<li>
				<strong>SetFromScene(group)</strong> - Sets the description of the XSIAGroup based on the given group/layer/partition in the scene.
			</li>
			<li>
				<strong>BuildInScene(parent)</strong> - Builds the group in the scene. Normal groups are parent under the given parent.
			</li>
		</ul>
		Its properties are:
		<ul>
			<li>
				<strong>type</strong> - A string storing "XSIAGroup".
			</li>
			<li>
				<strong>groupType</strong> - A string storing "group","layer" or "partition".
			</li>
			<li>
				<strong>name</strong> - The name of the group.
			</li>
			<li>
				<strong>filename</strong> - The filename of the preset used to create this group.
			</li>
			<li>
				<strong>members</strong> - A XSICollection of all of the members of this group.
			</li>
		</ul>
	</li>
	<li>
		<p><strong>XSIAPass Object</strong></p>
		The XSIAPass object respresents the description of a group/layer/partition.
		<br />Its methods are:
		<ul>
			<li>
				<strong>Clear()</strong> Resets/Clears the object.
			</li>
			<li>
				<strong>SetFromScene(pass)</strong> - Sets the description of the XSIAPass based on the given pass in the scene.
			</li>
			<li>
				<strong>BuildInScene()</strong> - Builds the pass in the scene.
			</li>
		</ul>
		Its properties are:
		<ul>
			<li>
				<strong>type</strong> - A string storing "XSIAPass".
			</li>
			<li>
				<strong>name</strong> - The name of the pass.
			</li>
			<li>
				<strong>filename</strong> - The filename of the preset used to create this pass.
			</li>
			<li>
				<strong>partitions</strong> - A XSICollection of XSIAGroup objects representing the partitions of the pass.
			</li>
		</ul>
	</li>
	</ul>
	</div>

	<div>
	<p class="proc-head">Example uses of the object model</p>
	You cannot run these examples. They are examples of how to use the object model, not runnable scripts.
	<ul>
	<li>
		Create a new xsia object, add a model to it and write the file out.
		(For this you will need a referenced model in the scene called "model1" and a directory on you machine called "C:/temp"<br /><br />
		<pre>
var xsia = XSIA_GetXSIAObject();
xsia.AddItemFromScene("model1");
xsia.WriteToFile("c:/temp/test.xsia");
		</pre>
	</li>
	<li>
		Open an existing xsia file, get all "ant" - models in it and write them to a new file.<br /><br />
		<pre>
var xsia = XSIA_GetXSIAObject();
xsia.ReadFromFile("c:/temp/allModels.xsia");

var xsia_onlyAnts = XSIA_GetXSIAObject();

var r = new RegExp(/^ant/i);
for(var i=0;i&#62xsia.models.count;i++)
{
	var match = r.exec(xsia.models(i).name);
	if(match)
	{
		xsia_onlyAnts.models.Add(xsia.models(i));
	}
}
xsia_onlyAnts.WriteToFile("c:/temp/onlyAnts.xsia");
		</pre>
	</li>
	<li>
		Open an existing xsia file and remap a drive of all used models from drive "s:" to "\\server\share"<br /><br />
		<pre>
var xsia = XSIA_GetXSIAObject();
xsia.ReadFromFile("c:/temp/allModels.xsia");
for(var i=0;i&#62xsia.models.count;i++)
{
	var model = xsia.models(i);
	for(var j=0;j&#62model.resolutions.count)
	{
		var res = model.resolution(j);
		res.filename = res.filename.replace(/s:/i,'\\\\server\\share');
	}
}
xsia.WriteToFile("c:/temp/allModels_UNC.xsia");
		</pre>
	</li>
	<li>
		Open two files and include the one file into the other one.<br /><br />
		<pre>
var xsia_1 = XSIA_GetXSIAObject();
var xsia_2 = XSIA_GetXSIAObject();
xsia_1.ReadFromFile("C:/temp/xsia_1.xsia");
xsia_2.ReadFromFile("C:/temp/xsia_1.xsia");
xsia_1.xsia_includes.Add(xsia_2);

xsia_1.WriteToFile("C:/temp/include.xsia");
		</pre>
	</li>
	<li>
		Open an existing XSIA file and import just the passes.<br /><br />
		<pre>
var xsia = XSIA_GetXSIAObject();
xsia.ReadFromFile("C:/temp/passes.xsia");
for(var i=0;i&#62xsia.passes.count;i++)
{
	xsia.passes(i).BuildInScene();
}
		</pre>
	</li>
	</ul>

	<div id="keywords">
	<h2>Keywords</h2>
	<p>This example uses the following keywords:</p>
	<p>
	import, export, ascii, xsia, xml,
	example, javascript, registercommand,
	registermenu
	</p>
	</div>

	</div>
	      <div class="footer-block"><a href="../html/ac.cmtdialog.htm" class="comments-anchor" target="_blank"><span class="comments-link">Please send us your comment about this page</span></a></div><br /></div>
   </div></div></body>
</html>
