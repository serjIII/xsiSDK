<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<!-- saved from url=(0024)http://docs.autodesk.com -->
<html>
   <head>
<link href="../style/prettify.css" type="text/css" rel="stylesheet" />
<script type="text/javascript" src="../scripts/prettify.js"></script><script src="../scripts/lib/jquery-1.9.1.min.js" type="text/javascript"></script><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><script type="text/javascript" src="../scripts/utils/adsk.redirect.js"></script>
      <title>Envelope.SetDeformerWeights</title>
   
</head>
   <body height="100%"><div class="body_content" id="body-content"><style>
/*  These settings override ones in the default stylesheets
	used by the merged files that cause problems in combination
	with the standard HTML help styles and page templates. */

div, div.example, div.tip {
	 margin:0;
}

td.example {
	background: inherit;
}

/* This fixes a problem with nested pre blocks on an example page */
pre pre {
	display:block;
	padding:0;
	border-style:none;
}
</style><link rel="stylesheet" href="si_om/css/en.css" type="text/css" /><script>$(document).ready(function() { yepnope.injectJs("./si_om/lib/utils.js"); });</script><script>$(document).ready(function() { yepnope.injectJs("./scripts/ac_common.js"); });</script><script type="text/javascript">var reflinkid = "si_cpp"; var reflinkdata = new Array(); function closeRefLinkDiv() { }; $(document).on('click', function() { closeRefLinkDiv(); } );</script><script>$(document).ready(function() { yepnope.injectJs("./scripts/multireflink.js"); });</script><script>$(document).ready(function () { prettyPrint(); } );</script><script>$("div#WidgetFloaterPanels,link[href*='microsofttranslator.com'],script[src*='microsofttranslator.com'],script[src*='bing.com']").remove();</script><script type='text/javascript'>$("div#navigation,div#breadcrumbs,div#banner").attr("translate","no"); var mtLocation = ((location && location.href && location.href.indexOf('https') == 0)?'https://ssl.microsofttranslator.com':'http://www.microsofttranslator.com')+'/ajax/v3/WidgetV3.ashx?siteData=y5CYlxTRD0znCzRLDwX0Wy7-g1EdC1XA4dSC-Y1LtaeScyli8_Ps5jPKqTr4xKxMI0OOUfkDplvX3uxN0JnPclebSYW8_J1HBzf4VLQEzQ8M4PsYXF_cMyp1Oumaetky&category=5297189e-446b-459e-ae1d-9d0360400781_tech&ctf=True&ui=true&settings=Manual&from=en&hidelanguages='; yepnope.injectJs(mtLocation, function() {}, { charset:'utf-8', type:'text/javascript' } );</script><script type="text/javascript">
 </script><!-- begin MT -->
            
            <div id='MicrosoftTranslatorWidget' class='Dark' style='position:absolute;right:20px;top:5px;z-index:100;color:white;background-color:#555555;height:58px;overflow:hidden'></div><div id="reflinkdiv" style="display:none; font-family: 'RobotoRegular', Arial, Tahoma, sans-serif; visibility:hidden; position:absolute; z-index:40001; padding:5px; border-style:solid; border-width:1px; border-color:#666666; background-color:#dfdfdf; overflow:visible"></div>
      <div>
         <div class="head">
            <h1>Envelope.SetDeformerWeights</h1>
         </div>

<h2 class="pagehead"><a href="#!/url=./si_om/Envelope.html">Envelope</a>.SetDeformerWeights</h2>

<h3>Description</h3>
<div><p>Sets the envelope weights for a given deformer and normalizes the weights. Use the
<a href="#!/url=./si_om/Envelope.SetDeformerWeights2.html">Envelope.SetDeformerWeights2</a> method if you don't want to normalize weights.<br /><br />
The deformer weights need
to be passed in the cluster index order not in the geometry index order. To retrieve
the cluster index corresponding to a given geometry index you can use <a href="#!/url=./si_om/Envelope.Elements.html">Envelope.Elements</a>
in conjunction with <a href="#!/url=./si_om/ClusterElementCollection.FindIndex.html">ClusterElementCollection.FindIndex</a>.</p></div>

<h3>C# Syntax</h3>
<div><p><table>
	<tr>
		<td class="example"><pre>Envelope.SetDeformerWeights( X3DObject, Object );</pre>		</td>	</tr>
</table>
</p></div>

<h3>Scripting Syntax</h3>
<div><p><table>
	<tr>
		<td class="example"><pre>Envelope.SetDeformerWeights( Deformer, [Weights] );</pre>		</td>	</tr>
</table>
</p></div>

<h3>Parameters</h3>
<div><p><table cellpadding="5" cellspacing="5">
	<tr>
		<th title="Name of the parameter">Parameter		</th>
		<th title="Data type">Type		</th>
		<th title="Description of the parameter">Description		</th>
	</tr>
	<tr>
		<td class="name">Deformer		</td>
		<td><a href="#!/url=./si_om/X3DObject.html">X3DObject</a> or expression		</td>
		<td>
 deformer object 		</td>
	</tr>
	<tr>
		<td class="name">Weights		</td>
		<td><a href="#!/url=./files/Array.htm">Array</a> of <a href="#!/url=./files/Double.htm">Double</a>s		</td>
		<td>
Array of weights, one for each point influenced by the Envelope		</td>
	</tr>
</table>
</p></div>

<h3>Examples</h3>
<div><p><h4>1. VBScript Example</h4><div class="example"><table>
<tr>
<td class="example"><pre class="vbscript">'vbscript example demonstrates GetDeformerWeights and SetDeformerWeights
'methods on the Envelope object
newscene ,false
set oSphere = ActiveSceneRoot.AddGeometry( "Sphere", "MeshSurface" )
'Create the skeleton
set oChainRoot = ActiveSceneRoot.Add3DChain
'There is already a first bone automatically created
set oBone0 = oChainRoot.Bones.Item(0) 
set oEffPos = XSIMath.CreateVector3
oEffPos.Set 3,3,3
set oBone1 = oChainRoot.AddBone(oEffPos)
set oEnvelope = oSphere.ApplyEnvelope( oChainRoot, siBranch )
'Access 1-dimensional arrays with the weights
aBone0Weights = oEnvelope.GetDeformerWeights( oBone0 )
aBone1Weights = oEnvelope.GetDeformerWeights( oBone1 )
'Demonstrate how we can read the weight values
for iElement=lbound(aBone1Weights,1) to ubound(aBone1Weights,1)
	if ( aBone1Weights( iElement ) &gt; 80.0 ) then
		logmessage "Point " &amp; oEnvelope.Elements.Item( iElement ) &amp; _
			" is almost completely influenced by Bone 0"
	end if
next
'We can use SetDeformerWeights to change the weightings.
'In this case we complete switch the influence of the bones
oEnvelope.SetDeformerWeights oBone1, aBone0Weights  
oEnvelope.SetDeformerWeights oBone0, aBone1Weights 
'Output of this script is the following:
'INFO : "Point 21 is almost completely influenced by Bone 0"
'INFO : "Point 26 is almost completely influenced by Bone 0"
'INFO : "Point 27 is almost completely influenced by Bone 0"
'INFO : "Point 28 is almost completely influenced by Bone 0"
'INFO : "Point 29 is almost completely influenced by Bone 0"
'INFO : "Point 35 is almost completely influenced by Bone 0"</pre></td></tr>
</table>
</div><h4>2. JScript Example</h4><div class="example"><table>
<tr>
<td class="example"><pre class="jscript">//JScript example showing how to modify deformer weights
//via GetDeformerWeights/SetDeformerWeights
var root = Application.ActiveProject.ActiveScene.Root
var n = root.AddNull();
var n1 = root.AddNull();
var n2 = root.AddNull();
translate( n, 1, 0, 1 );
translate( n1, 0, 0, 1 );
translate( n2, 0, 0, 0 );
var grid = root.AddGeometry( "cube", "MeshSurface");
var deformers = new ActiveXObject( "XSI.Collection");
deformers.Add( n );
deformers.Add( n1 );
deformers.Add( n2 );
var env = grid.ApplyEnvelope( deformers );
//get and set the weights from the first deformer
var vba = new VBArray( env.getdeformerweights( n ) );
var jsa = vba.toArray();
logmessage( "weight values before changes:" );
for( var i=0; i&lt;jsa.length; i++ )
{
	logmessage( jsa[i] )
	jsa[i] = 10.0;
}
env.setdeformerweights( n, jsa );
//Show values after changes
var vba = new VBArray( env.getdeformerweights( n ) );
logmessage( "weight values after changes:" )	
var jsa = vba.toArray();
for( var i=0; i&lt;jsa.length; i++ )
{
	logmessage( jsa[i] )
}</pre></td></tr>
</table>
</div></p></div>

<h3>See Also</h3>
<div><p><a href="#!/url=./si_om/Envelope.SetDeformerWeights2.html">Envelope.SetDeformerWeights2</a> <a href="#!/url=./si_om/Envelope.GetDeformerWeights.html">Envelope.GetDeformerWeights</a></p></div>

      <div class="footer-block"><a href="../html/ac.cmtdialog.htm" class="comments-anchor" target="_blank"><span class="comments-link">Please send us your comment about this page</span></a></div><br /></div>
   </div></body>
</html>
