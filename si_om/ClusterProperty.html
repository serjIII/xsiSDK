<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<!-- saved from url=(0024)http://docs.autodesk.com -->
<html>
   <head>
<link href="../style/prettify.css" type="text/css" rel="stylesheet" />
<script type="text/javascript" src="../scripts/prettify.js"></script><script src="../scripts/lib/jquery-1.9.1.min.js" type="text/javascript"></script><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><script type="text/javascript" src="../scripts/utils/adsk.redirect.js"></script>
      <title>ClusterProperty</title>
   
</head>
   <body height="100%"><div class="body_content" id="body-content"><style>
/*  These settings override ones in the default stylesheets
	used by the merged files that cause problems in combination
	with the standard HTML help styles and page templates. */

div, div.example, div.tip {
	 margin:0;
}

td.example {
	background: inherit;
}

/* This fixes a problem with nested pre blocks on an example page */
pre pre {
	display:block;
	padding:0;
	border-style:none;
}
</style><link rel="stylesheet" href="si_om/css/en.css" type="text/css" /><script>$(document).ready(function() { yepnope.injectJs("./si_om/lib/utils.js"); });</script><script>$(document).ready(function() { yepnope.injectJs("./scripts/ac_common.js"); });</script><script type="text/javascript">var reflinkid = "si_cpp"; var reflinkdata = new Array(); function closeRefLinkDiv() { }; $(document).on('click', function() { closeRefLinkDiv(); } );</script><script>$(document).ready(function() { yepnope.injectJs("./scripts/multireflink.js"); });</script><script>$(document).ready(function () { prettyPrint(); } );</script><script>$("div#WidgetFloaterPanels,link[href*='microsofttranslator.com'],script[src*='microsofttranslator.com'],script[src*='bing.com']").remove();</script><script type='text/javascript'>$("div#navigation,div#breadcrumbs,div#banner").attr("translate","no"); var mtLocation = ((location && location.href && location.href.indexOf('https') == 0)?'https://ssl.microsofttranslator.com':'http://www.microsofttranslator.com')+'/ajax/v3/WidgetV3.ashx?siteData=y5CYlxTRD0znCzRLDwX0Wy7-g1EdC1XA4dSC-Y1LtaeScyli8_Ps5jPKqTr4xKxMI0OOUfkDplvX3uxN0JnPclebSYW8_J1HBzf4VLQEzQ8M4PsYXF_cMyp1Oumaetky&category=5297189e-446b-459e-ae1d-9d0360400781_tech&ctf=True&ui=true&settings=Manual&from=en&hidelanguages='; yepnope.injectJs(mtLocation, function() {}, { charset:'utf-8', type:'text/javascript' } );</script><script type="text/javascript">
 </script><!-- begin MT -->
            
            <div id='MicrosoftTranslatorWidget' class='Dark' style='position:absolute;right:20px;top:5px;z-index:100;color:white;background-color:#555555;height:58px;overflow:hidden'></div><div id="reflinkdiv" style="display:none; font-family: 'RobotoRegular', Arial, Tahoma, sans-serif; visibility:hidden; position:absolute; z-index:40001; padding:5px; border-style:solid; border-width:1px; border-color:#666666; background-color:#dfdfdf; overflow:visible"></div>
      <div>
         <div class="head">
            <h1>ClusterProperty</h1>
         </div>

<h2 class="pagehead">ClusterProperty</h2>

<p><a href="#!/url=./si_om/_hier.html#oh_ClusterProperty">Object Hierarchy</a> | Related C++ Class: <a href="#!/url=./si_cpp/classXSI_1_1ClusterProperty.html">ClusterProperty</a></p>

<h3>Inheritance<h3>
<p class="level1"><a href="#!/url=./si_om/SIObject.html">SIObject</a></p>
<p class="level2"><a href="#!/url=./si_om/ProjectItem.html">ProjectItem</a></p>
<p class="level3"><a href="#!/url=./si_om/Property.html">Property</a></p>
<p class="level4">ClusterProperty</p>

<h3>Description</h3>
<div><p> A property of a <a href="#!/url=./si_om/Cluster.html">Cluster</a> that stores separate data for each
component of the cluster.  <br /><br />
The data type of the value stored for each component is 
an <a href="#!/url=./files/Array.htm">Array</a> of <a href="#!/url=./files/Double.htm">Double</a>s.  The size depends on the type of
the cluster property.  Size of a weight map is 1.  Size of a UV property is 3 (UVW).
Size of a Shape Animation property is 3 (XYZ).  Size of a vertex color property is 4 (RGBA).
Size of an envelope weight property is equal to the number of deformers
Size of a User Motion property is 3 (XYZ).<br /><br />
The values contained by the cluster property can be accessed via the
<a href="#!/url=./si_om/ClusterProperty.Elements.html">ClusterProperty.Elements</a>. You can access
the entire 2-dimensional value array using <a href="#!/url=./si_om/ClusterElementCollection.Array.html">ClusterElementCollection.Array</a> or
individual values via <a href="#!/url=./si_om/ClusterElementCollection.ItemsByIndex.html">ClusterElementCollection.ItemsByIndex</a>. The data type
of the value returned by <a href="#!/url=./si_om/ClusterElementCollection.ItemsByIndex.html">ClusterElementCollection.ItemsByIndex</a> is always an <a href="#!/url=./files/Array.htm">Array</a>.<br /><br />
Use the <a href="#!/url=./si_om/SceneItem.LocalProperties.html">SceneItem.LocalProperties</a> property to find ClusterProperties 
on a <a href="#!/url=./si_om/Cluster.html">Cluster</a>.<br /><br />
Notice that some cluster property types can only be added to <a href="#!/url=./si_om/Cluster.html">Cluster</a> objects that are always-complete
(see <a href="#!/url=./si_om/Cluster.IsAlwaysComplete.html">Cluster.IsAlwaysComplete</a>).
These types are vertex color, uv, symmetry map and user motion properties.
</p></div>

<h3>Methods</h3>
<div><p><table>
	<tr>

		<td class="members"><a href="#!/url=./si_om/ProjectItem.AddCustomOp.html">AddCustomOp</a>		</td>		<td class="members"><a href="#!/url=./si_om/ProjectItem.AddICEAttribute.html">AddICEAttribute</a>		</td>		<td class="members"><a href="#!/url=./si_om/ProjectItem.AddScriptedOp.html">AddScriptedOp</a>		</td>		<td class="members"><a href="#!/url=./si_om/ProjectItem.AddScriptedOpFromFile.html">AddScriptedOpFromFile</a>		</td>	</tr>

	<tr>

		<td class="members"><a href="#!/url=./si_om/ProjectItem.AnimatedParameters2.html">AnimatedParameters2</a>		</td>		<td class="members"><a href="#!/url=./si_om/ProjectItem.BelongsTo.html">BelongsTo</a> <img src="images/operator.gif" alt="operator" />		</td>		<td class="members"><a href="#!/url=./si_om/ProjectItem.EvaluateAt.html">EvaluateAt</a>		</td>		<td class="members"><a href="#!/url=./si_om/ProjectItem.GetICEAttributeFromName.html">GetICEAttributeFromName</a>		</td>	</tr>

	<tr>

		<td class="members"><a href="#!/url=./si_om/ProjectItem.IsA.html">IsA</a>		</td>		<td class="members"><a href="#!/url=./si_om/ProjectItem.IsAnimated2.html">IsAnimated2</a>		</td>		<td class="members"><a href="#!/url=./si_om/SIObject.IsClassOf.html">IsClassOf</a> <img src="images/operator.gif" alt="operator" />		</td>		<td class="members"><a href="#!/url=./si_om/SIObject.IsEqualTo.html">IsEqualTo</a> <img src="images/operator.gif" alt="operator" />		</td>	</tr>

	<tr>

		<td class="members"><a href="#!/url=./si_om/ProjectItem.IsKindOf.html">IsKindOf</a>		</td>		<td class="members"><a href="#!/url=./si_om/ProjectItem.IsLocked.html">IsLocked</a> <img src="images/operator.gif" alt="operator" />		</td>		<td class="members"><a href="#!/url=./si_om/ProjectItem.IsSelected.html">IsSelected</a> <img src="images/operator.gif" alt="operator" />		</td>		<td class="members"><a href="#!/url=./si_om/ProjectItem.LockOwners.html">LockOwners</a>		</td>	</tr>

	<tr>

		<td class="members"><a href="#!/url=./si_om/ProjectItem.RemoveICEAttribute.html">RemoveICEAttribute</a>		</td>		<td class="members"><a href="#!/url=./si_om/ProjectItem.SetAsSelected.html">SetAsSelected</a> <img src="images/operator.gif" alt="operator" />		</td>		<td class="members"><a href="#!/url=./si_om/ProjectItem.SetCapabilityFlag.html">SetCapabilityFlag</a> <img src="images/operator.gif" alt="operator" />		</td>		<td class="members"><a href="#!/url=./si_om/ProjectItem.SetLock.html">SetLock</a>		</td>	</tr>

	<tr>

		<td class="members"><a href="#!/url=./si_om/ProjectItem.TaggedParameters.html">TaggedParameters</a>		</td>		<td class="members"><a href="#!/url=./si_om/ProjectItem.UnSetLock.html">UnSetLock</a>		</td>		<td class="members">&nbsp;		</td>		<td class="members">&nbsp;		</td>	</tr>

	<tr>

		<td class="members">&nbsp;		</td>		<td class="members">&nbsp;		</td>		<td class="members">&nbsp;		</td>		<td class="members">&nbsp;		</td>	</tr>

</table>
</p></div>

<h3>Properties</h3>
<div><p><table>
	<tr>

		<td class="members"><a href="#!/url=./si_om/SIObject.Application.html">Application</a>		</td>		<td class="members"><a href="#!/url=./si_om/Property.Branch.html">Branch</a> <img src="images/operator.gif" alt="operator" />		</td>		<td class="members"><a href="#!/url=./si_om/ProjectItem.BranchFlag.html">BranchFlag</a> <img src="images/operator.gif" alt="operator" />		</td>		<td class="members"><a href="#!/url=./si_om/ProjectItem.Capabilities.html">Capabilities</a> <img src="images/operator.gif" alt="operator" />		</td>	</tr>

	<tr>

		<td class="members"><a href="#!/url=./si_om/SIObject.Categories.html">Categories</a>		</td>		<td class="members" style="background:#ffffc0;"><a href="#!/url=./si_om/ClusterProperty.Elements.html">Elements</a> <img src="images/operator.gif" alt="operator" />		</td>		<td class="members"><a href="#!/url=./si_om/ProjectItem.EvaluationID.html">EvaluationID</a>		</td>		<td class="members"><a href="#!/url=./si_om/ProjectItem.Families.html">Families</a> <img src="images/operator.gif" alt="operator" />		</td>	</tr>

	<tr>

		<td class="members"><a href="#!/url=./si_om/SIObject.FullName.html">FullName</a> <img src="images/operator.gif" alt="operator" />		</td>		<td class="members"><a href="#!/url=./si_om/SIObject.Help.html">Help</a>		</td>		<td class="members"><a href="#!/url=./si_om/ProjectItem.HierarchicalEvaluationID.html">HierarchicalEvaluationID</a>		</td>		<td class="members"><a href="#!/url=./si_om/ProjectItem.ICEAttributes.html">ICEAttributes</a>		</td>	</tr>

	<tr>

		<td class="members"><a href="#!/url=./si_om/ProjectItem.LockLevel.html">LockLevel</a> <img src="images/operator.gif" alt="operator" />		</td>		<td class="members"><a href="#!/url=./si_om/ProjectItem.LockMasters.html">LockMasters</a> <img src="images/operator.gif" alt="operator" />		</td>		<td class="members"><a href="#!/url=./si_om/ProjectItem.LockType.html">LockType</a> <img src="images/operator.gif" alt="operator" />		</td>		<td class="members"><a href="#!/url=./si_om/ProjectItem.Model.html">Model</a>		</td>	</tr>

	<tr>

		<td class="members"><a href="#!/url=./si_om/SIObject.Name.html">Name</a> <img src="images/operator.gif" alt="operator" />		</td>		<td class="members"><a href="#!/url=./si_om/SIObject.NestedObjects.html">NestedObjects</a>		</td>		<td class="members"><a href="#!/url=./si_om/ProjectItem.ObjectID.html">ObjectID</a>		</td>		<td class="members"><a href="#!/url=./si_om/SIObject.Origin.html">Origin</a>		</td>	</tr>

	<tr>

		<td class="members"><a href="#!/url=./si_om/SIObject.OriginPath.html">OriginPath</a>		</td>		<td class="members"><a href="#!/url=./si_om/ProjectItem.Owners.html">Owners</a>		</td>		<td class="members"><a href="#!/url=./si_om/ProjectItem.PPGLayout.html">PPGLayout</a> <img src="images/operator.gif" alt="operator" />		</td>		<td class="members"><a href="#!/url=./si_om/ProjectItem.Parameters.html">Parameters</a> <img src="images/operator.gif" alt="operator" />		</td>	</tr>

	<tr>

		<td class="members"><a href="#!/url=./si_om/SIObject.Parent.html">Parent</a>		</td>		<td class="members"><a href="#!/url=./si_om/ProjectItem.Parent3DObject.html">Parent3DObject</a>		</td>		<td class="members"><a href="#!/url=./si_om/ProjectItem.Selected.html">Selected</a> <img src="images/operator.gif" alt="operator" />		</td>		<td class="members"><a href="#!/url=./si_om/Property.Singleton.html">Singleton</a> <img src="images/operator.gif" alt="operator" />		</td>	</tr>

	<tr>

		<td class="members"><a href="#!/url=./si_om/SIObject.Type.html">Type</a> <img src="images/operator.gif" alt="operator" />		</td>		<td class="members">&nbsp;		</td>		<td class="members">&nbsp;		</td>		<td class="members">&nbsp;		</td>	</tr>

	<tr>

		<td class="members">&nbsp;		</td>		<td class="members">&nbsp;		</td>		<td class="members">&nbsp;		</td>		<td class="members">&nbsp;		</td>	</tr>

</table>
</p></div>

<h3>Examples</h3>
<div><p><h4>1. JScript Example</h4><div class="example"><table>
<tr>
<td class="example"><pre class="jscript">//JScript example showing how to read UV values in a 
//UV Cluster Property
var oRoot = Application.ActiveProject.ActiveScene.Root;
var oObject = oRoot.AddGeometry( "Cube", "MeshSurface" );
BlendInPresets( "Image", oObject, 1, false );
CreateTextureSupport( oObject, siTxtUV, siTxtDefaultSpherical, "Texture_Support" );
SetInstanceDataValue(null, "cube.Scene_Material.UV", "Texture_Support");
var oUVWProp = oObject.Material.CurrentUV;
// Output the first 5 UV text coords
var vbaUVW = new VBArray(oUVWProp.Elements.Array);
// Use this to map from index in the Cluster back to index in the Geometry
// If the cluster is not complete or if topology changes are done then
// the geometry index is not necessarily the same as the cluster index
var vbaClusterElement = new VBArray(oUVWProp.Parent.Elements.Array);
for ( iIndex = 0; iIndex &lt; 4; iIndex++ )
{
		logmessage ( "Sample(" + vbaClusterElement.getItem(iIndex) + ") = UV(" + 
			   vbaUVW.getItem(0,iIndex) + "," + vbaUVW.getItem(1,iIndex) + ")"  ) ;
}
//INFO : "Sample(0) = UV(0.125,0.30408671498298645)"
//INFO : "Sample(1) = UV(0.125,0.6959132552146912)"
//INFO : "Sample(2) = UV(-0.125,0.6959132552146912)"
//INFO : "Sample(3) = UV(-0.125,0.30408671498298645)"</pre></td></tr>
</table>
</div><h4>2. VBScript Example</h4><div class="example"><table>
<tr>
<td class="example"><pre class="vbscript">'VBScript example showing how to read UV values in a 
'UV Cluster Property
set oRoot = application.activeproject.activescene.root
set oObject = oRoot.addgeometry( "Cube", "MeshSurface" )
BlendInPresets "Image", oObject, 1, False
CreateTextureSupport oObject, siTxtUV, siTxtDefaultSpherical, "Texture_Support"
SetInstanceDataValue , oObject &amp; ".Scene_Material.UV", "Texture_Support"
set oUVWProp = oObject.Material.CurrentUV
' output uv text coords
aUVW=oUVWProp.elements.array
'Use this to map from index in the Cluster back to index in the Geometry
'If the cluster is not complete or if topology changes are done then
'the geometry index is not necessarily the same as the cluster index
aClusterIndices = oUVWProp.Parent.elements.array
' Print out just the first few elements
for iIndex=0 to 3 
	logmessage "Sample(" &amp; aClusterIndices(iIndex) &amp; ") = UV(" &amp; _
		   aUVW(0,iIndex) &amp; "," &amp; aUVW(1,iIndex) &amp; ")" 
next
'Result of running this script:
'INFO : "Sample(0) = UV(0.125,0.304086714982986)"
'INFO : "Sample(1) = UV(0.125,0.695913255214691)"
'INFO : "Sample(2) = UV(-0.125,0.695913255214691)"
'INFO : "Sample(3) = UV(-0.125,0.304086714982986)"</pre></td></tr>
</table>
</div><h4>3. VBScript Example</h4><div class="example"><table>
<tr>
<td class="example"><pre class="vbscript">' VBScript example showing how to find the
' texture projection UV values associated
' with each vertex of a polygon
set oRoot = application.activeproject.activescene.root
set oObject = oRoot.addgeometry("Grid", "MeshSurface")
setValue oObject &amp; ".polymsh.geom.subdivu", 2
setValue oObject &amp; ".polymsh.geom.subdivv", 1
BlendInPresets "Image", oObject, 1, False
CreateTextureSupport oObject, siTxtPlanarXZ, siTxtDefaultPlanarXZ, "Texture_Support"
set oUVWProp = oObject.Material.CurrentUV
set oGeom = oObject.activeprimitive.geometry
' get UVW array
aUVW = oUVWProp.elements.Array
' The cluster knows the relationship between
' indices of the Samples and indices of the Sample cluster
set oCluster = oUVWProp.Parent
for Each oPolygon In oGeom.Polygons
	' get polygon index
	oPolygonId = oPolygon.Index
	' get points index array under polygon
	aPntsIndex = oPolygon.Points.IndexArray
	logMessage "Polygon" &amp; oPolygonId
	' get sample indices
	set oSamples = oPolygon.Samples
	for i = 0 To oSamples.Count - 1	
		'Map from the geometry index to the cluster index
		indexInCluster = oCluster.FindIndex( oSamples(i).Index )
		if ( indexInCluster &lt;&gt; -1 ) then	
			logMessage "Point" &amp; aPntsIndex(i) &amp; ":" &amp; "UV("_
				&amp; aUVW(0, oSamples(i).Index) &amp; _
				"," &amp; aUVW(1, oSamples(i).Index) &amp; ")"
		end if
	next
next</pre></td></tr>
</table>
</div><h4>4. VBScript Example</h4><div class="example"><table>
<tr>
<td class="example"><pre class="vbscript">' This example demonstrates applying a file as a texture to an object, and explicitly setting 
' the UV values to specify how the texture maps onto the geometry
option explicit
'This Texture should be a unique name to avoid conflicts with any other possible textures
'The projection and the uv cluster property will use this name
const g_ProjectionName = "MyTexture"
'Set up a sample scene
dim oObj1, oObj2, ImageFile
ImageFile = Application.InstallationPath(siFactoryPath) &amp; "\Data\XSI_SAMPLES\Pictures\jaiqua_face.jpg"
NewScene ,false
SetDisplayMode "Camera", "texturedecal"
set oObj1 = ActiveSceneRoot.AddGeometry( "Sphere", "MeshSurface" )
ApplyFileAsTexture oObj1,ImageFile 
set oObj2 = ActiveSceneRoot.AddGeometry( "Torus", "MeshSurface" )
Translate oObj2, 0, 5, 0, siRelative, siView, siObj, siY
ApplyFileAsTexture oObj2,ImageFile
sub ApplyFileAsTexture( in_obj, in_FileName )
	AttachImageFileToObj in_obj, in_FileName 
	dim oUVProp
	set oUVProp = FindClusterProperty( in_obj, g_ProjectionName)
	SetUVsOnProperty in_obj, oUVProp 		
end sub
'Subroutine: Attach Image File to Object
'
'This method creates a texture project, and image clip
'and a small render tree that uses the image as the object's texture
sub AttachImageFileToObj( in_obj, in_FileName )
	Dim oTextureProj
	set oTextureProj = CreateProjection( in_obj, , siTxtUV, , g_ProjectionName )
	'Create a local copy of the material and attach the default (phong shader)
	in_obj.AddMaterial "Phong" 
	dim oPhongShader, oAmbientParam, oDiffuseParam
	set oPhongShader = in_obj.Material.Shaders(0)
	set oAmbientParam = oPhongShader.Parameters( "ambient" )
	set oDiffuseParam = oPhongShader.Parameters( "diffuse" )	
	dim oImageClip
	SICreateImageClip in_FileName, ,oImageClip		
	dim oImageNode
	set oImageNode = oAmbientParam.connectfrompreset("Image", siTextureShaderFamily)
	'Diffuse will be driven by the same image node
	oDiffuseParam.Connect( oImageNode )
	oImageNode.parameters( "tex" ).Connect(oImageClip)
	'Tell the image node that the uv values we are going to write into
	'the cluster property are the ones to use for this image
	oImageNode.parameters( "tspace_id" ).SetInstanceValue in_obj, oTextureProj, true
	'Connect the image to the image node		
	oImageNode.Parameters( "tex" ).Connect( oImageClip )	
end sub	
'Subroutine: SetUVOnProperty
'
'Given an object and a Cluster Property of UV's 
'this routine will fill in values.
'Currently it just show the entire texture on 
'each polygon.  However it could also be adjusted 
'to take the UV values as arguments
sub SetUVsOnProperty( in_oObj, in_oUVProp )
	dim oUVElements, oCluster, cnt
	'get the ClusterElementCollection	
	set oUVElements = in_oUVProp.Elements  
	set oCluster = in_oUVProp.Parent
	cnt = oUVElements.Count
	'Get an array of all the UV Values
	dim ElArray, i
	ElArray = oUVElements.Array
	'Zero out the u,v,w values in the array
	for i = 0 to cnt - 1
		ElArray( 0, i ) = 0
		ElArray( 1, i ) = 0
		ElArray( 2, i ) = 0
	next
	'Traverse the facets (eg polygons on a polymesh)
	'setting the UV values for each sample	
	dim oFacets, oFacet, oSamples, oSample, cntSamples
	dim sample1ClusterIdx, sample2ClusterIdx, sample3ClusterIdx
	set oFacets = in_oObj.ActivePrimitive.Geometry.Facets
	for each oFacet in oFacets		
		set oSamples = oFacet.Samples
		cntSamples = oSamples.Count
		'In this example we will map each polygon to cover
		'the entire u/v space - eg the entire texture shows up on
		'each
		'Because values are already zeroed we only set
		'the values	we want as non-zero
		sample1ClusterIdx = oCluster.FindIndex( oSamples(1).Index )
		sample2ClusterIdx = oCluster.FindIndex( oSamples(2).Index )	
		ElArray( 0, sample1ClusterIdx ) = 1
		ElArray( 0, sample2ClusterIdx ) = 1
		ElArray( 1, sample2ClusterIdx ) = 1
		if ( cntSamples &gt;= 4 ) then
			sample3ClusterIdx = oCluster.FindIndex( oSamples(2).Index )
			ElArray( 1, oSamples(3).Index ) = 1
		end if
	next
	'Assign these values to the cluster property
	oUVElements.Array = ElArray
	'Freezing the property provides the most efficient memory representation	
	FreezeObj in_oUVProp
end sub
'Subroutine: FindClusterProperty
'Give an object and a property name string,
'this will find the UV cluster property
function FindClusterProperty( in_obj, in_Name )
	dim oClusters, oCluster, oProps, oProp
	'Get the sample clusters
	set oClusters = in_obj.ActivePrimitive.Geometry.Clusters.Filter( "Sample" )
	for each oCluster in oClusters
		set oProps = oCluster.Properties.Filter( "uvspace" )
		for each oProp in oProps
			if ( oProp.Name = in_Name ) then
				set FindClusterProperty = oProp
				exit function
			end if				
		next	
	next
	set FindClusterProperty = Nothing
end function</pre></td></tr>
</table>
</div><h4>5. VBScript Example</h4><div class="example"><table>
<tr>
<td class="example"><pre class="vbscript">'VBScript example showing how to find ClusterProperty objects
'on an Mesh
'Create a sample scene with many different cluster properties
newscene ,false
dim sphere
set sphere = CreatePrim ( "Sphere", "MeshSurface" )
'Create a vertex color cluster property
CreateVertexColorSupport , "MyVertexColorProperty", sphere 
'Save a Shape
SaveShapeKey "sphere", , , 1, , , , , siShapeLocalReferenceMode
'Create a symmetry map
CreateSymmetryMap
'Save two weight maps (they will re-use the same
'cluster)
CreateWeightMap , sphere, "Weight_Map1"
CreateWeightMap , sphere, "Weight_Map2"
'Create an skeleton and envelop weight map
Create2DSkeleton -5, 1, 0, 6, 1, 0, -6, 0, 0, 4
AppendBone "eff", 5, 4, 0
ApplyFlexEnv "sphere;bone,bone1", False
'Demonstrate how it is possible to find all the
'clusters and cluster properties
logmessage "List of Clusters and Cluster Properties on " &amp; sphere.Name
logmessage "--------------------------------"
for each oCluster in sphere.ActivePrimitive.Geometry.Clusters	
	logmessage "Cluster: " &amp; oCluster.Name
	for each oLocalProp in oCluster.LocalProperties
		if typename( oLocalProp ) = "ClusterProperty" then
			logmessage "   " &amp; oLocalProp.Name &amp; " (Type: " &amp; oLocalProp.Type &amp; ")"
		end if
	next	
	logmessage "--------------------------------"
next
'Demonstrate how we can be more direct if we are looking for a specific type
'of cluster property
'We know that weight maps are always on point clusters
set oPntClusters = sphere.ActivePrimitive.Geometry.Clusters.Filter( "pnt" )
for each oPntCluster in oPntClusters
	set oWeightMaps = oPntCluster.LocalProperties.Filter( "wtmap" )
	for each oWeightMap in oWeightMaps
		logmessage "Found weight map " &amp; oWeightMap.FullName
	next 
next</pre></td></tr>
</table>
</div></p></div>

<h3>See Also</h3>
<div><p><a href="#!/url=./si_om/Material.CurrentUV.html">Material.CurrentUV</a> <a href="#!/url=./si_om/Geometry.SaveShapeKey.html">Geometry.SaveShapeKey</a> <a href="#!/url=./si_om/PolygonMesh.AddVertexColor.html">PolygonMesh.AddVertexColor</a> <a href="#!/url=./si_cmds/CreateVertexColorSupport.html">CreateVertexColorSupport</a> <a href="#!/url=./si_cmds/CreateUserMotion.html">CreateUserMotion</a></p></div>

      <div class="footer-block"><a href="../html/ac.cmtdialog.htm" class="comments-anchor" target="_blank"><span class="comments-link">Please send us your comment about this page</span></a></div><br /></h3></h3></div>
   </div></body>
</html>
