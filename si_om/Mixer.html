<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<!-- saved from url=(0024)http://docs.autodesk.com -->
<html>
   <head>
<link href="../style/prettify.css" type="text/css" rel="stylesheet" />
<script type="text/javascript" src="../scripts/prettify.js"></script><script src="../scripts/lib/jquery-1.9.1.min.js" type="text/javascript"></script><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><script type="text/javascript" src="../scripts/utils/adsk.redirect.js"></script>
      <title>Mixer</title>
   
</head>
   <body height="100%"><div class="body_content" id="body-content"><style>
/*  These settings override ones in the default stylesheets
	used by the merged files that cause problems in combination
	with the standard HTML help styles and page templates. */

div, div.example, div.tip {
	 margin:0;
}

td.example {
	background: inherit;
}

/* This fixes a problem with nested pre blocks on an example page */
pre pre {
	display:block;
	padding:0;
	border-style:none;
}
</style><link rel="stylesheet" href="si_om/css/en.css" type="text/css" /><script>$(document).ready(function() { yepnope.injectJs("./si_om/lib/utils.js"); });</script><script>$(document).ready(function() { yepnope.injectJs("./scripts/ac_common.js"); });</script><script type="text/javascript">var reflinkid = "si_cpp"; var reflinkdata = new Array(); function closeRefLinkDiv() { }; $(document).on('click', function() { closeRefLinkDiv(); } );</script><script>$(document).ready(function() { yepnope.injectJs("./scripts/multireflink.js"); });</script><script>$(document).ready(function () { prettyPrint(); } );</script><script>$("div#WidgetFloaterPanels,link[href*='microsofttranslator.com'],script[src*='microsofttranslator.com'],script[src*='bing.com']").remove();</script><script type='text/javascript'>$("div#navigation,div#breadcrumbs,div#banner").attr("translate","no"); var mtLocation = ((location && location.href && location.href.indexOf('https') == 0)?'https://ssl.microsofttranslator.com':'http://www.microsofttranslator.com')+'/ajax/v3/WidgetV3.ashx?siteData=y5CYlxTRD0znCzRLDwX0Wy7-g1EdC1XA4dSC-Y1LtaeScyli8_Ps5jPKqTr4xKxMI0OOUfkDplvX3uxN0JnPclebSYW8_J1HBzf4VLQEzQ8M4PsYXF_cMyp1Oumaetky&category=5297189e-446b-459e-ae1d-9d0360400781_tech&ctf=True&ui=true&settings=Manual&from=en&hidelanguages='; yepnope.injectJs(mtLocation, function() {}, { charset:'utf-8', type:'text/javascript' } );</script><script type="text/javascript">
 </script><!-- begin MT -->
            
            <div id='MicrosoftTranslatorWidget' class='Dark' style='position:absolute;right:20px;top:5px;z-index:100;color:white;background-color:#555555;height:58px;overflow:hidden'></div><div id="reflinkdiv" style="display:none; font-family: 'RobotoRegular', Arial, Tahoma, sans-serif; visibility:hidden; position:absolute; z-index:40001; padding:5px; border-style:solid; border-width:1px; border-color:#666666; background-color:#dfdfdf; overflow:visible"></div>
      <div>
         <div class="head">
            <h1>Mixer</h1>
         </div>

<h2 class="pagehead">Mixer</h2>

<p><a href="#!/url=./si_om/_hier.html#oh_Mixer">Object Hierarchy</a> | Related C++ Class: <a href="#!/url=./si_cpp/classXSI_1_1Mixer.html">Mixer</a></p>

<h3>Inheritance<h3>
<p class="level1"><a href="#!/url=./si_om/SIObject.html">SIObject</a></p>
<p class="level2"><a href="#!/url=./si_om/ProjectItem.html">ProjectItem</a></p>
<p class="level3"><a href="#!/url=./si_om/Clip.html">Clip</a></p>
<p class="level4"><a href="#!/url=./si_om/ClipContainer.html">ClipContainer</a></p>
<p class="level5">Mixer</p>

<h3>Introduced</h3>
<div><p>v4.0</p></div>

<h3>Description</h3>
<div><p> This object represents the Animation Mixer, which is nested directly under the 
<a href="#!/url=./si_om/Model.html">Model</a>. The Mixer object is a <a href="#!/url=./si_om/ClipContainer.html">ClipContainer</a> and
so provides access to the standard elements of a mixer: its <a href="#!/url=./si_om/Track.html">Track</a>s,
<a href="#!/url=./si_om/Transition.html">Transition</a>s, <a href="#!/url=./si_om/Clip.html">Clip</a>s, and <a href="#!/url=./si_om/ClipRelation.html">ClipRelation</a>s.<br /><br />
You can check if an object has a mixer by calling the <a href="#!/url=./si_om/Model.HasMixer.html">Model.HasMixer</a> method.
If it doesn't, you can create one with the <a href="#!/url=./si_om/Model.AddMixer.html">Model.AddMixer</a> method.<br /><br />
The Mixer stores all of the <a href="#!/url=./si_om/Model.html">Model</a>'s high-level animation and audio clips, so 
when you call its base property <a href="#!/url=./si_om/ClipContainer.Clips.html">ClipContainer.Clips</a>, you get a collection
of clips only on the current model (there is no recursion). If any of these are compound clips,
none of its contents are returned, just the top level.
</p></div>

<h3>Methods</h3>
<div><p><table>
	<tr>

		<td class="members"><a href="#!/url=./si_om/ProjectItem.AddCustomOp.html">AddCustomOp</a>		</td>		<td class="members"><a href="#!/url=./si_om/ProjectItem.AddICEAttribute.html">AddICEAttribute</a>		</td>		<td class="members"><a href="#!/url=./si_om/Clip.AddProperty.html">AddProperty</a>		</td>		<td class="members"><a href="#!/url=./si_om/Clip.AddProperty2.html">AddProperty2</a>		</td>	</tr>

	<tr>

		<td class="members"><a href="#!/url=./si_om/ClipContainer.AddRelation.html">AddRelation</a>		</td>		<td class="members"><a href="#!/url=./si_om/ProjectItem.AddScriptedOp.html">AddScriptedOp</a>		</td>		<td class="members"><a href="#!/url=./si_om/ProjectItem.AddScriptedOpFromFile.html">AddScriptedOpFromFile</a>		</td>		<td class="members"><a href="#!/url=./si_om/ProjectItem.AnimatedParameters2.html">AnimatedParameters2</a>		</td>	</tr>

	<tr>

		<td class="members"><a href="#!/url=./si_om/ProjectItem.BelongsTo.html">BelongsTo</a> <img src="images/operator.gif" alt="operator" />		</td>		<td class="members"><a href="#!/url=./si_om/ProjectItem.EvaluateAt.html">EvaluateAt</a>		</td>		<td class="members"><a href="#!/url=./si_om/ProjectItem.GetICEAttributeFromName.html">GetICEAttributeFromName</a>		</td>		<td class="members"><a href="#!/url=./si_om/ProjectItem.IsA.html">IsA</a>		</td>	</tr>

	<tr>

		<td class="members"><a href="#!/url=./si_om/ProjectItem.IsAnimated2.html">IsAnimated2</a>		</td>		<td class="members"><a href="#!/url=./si_om/SIObject.IsClassOf.html">IsClassOf</a> <img src="images/operator.gif" alt="operator" />		</td>		<td class="members"><a href="#!/url=./si_om/SIObject.IsEqualTo.html">IsEqualTo</a> <img src="images/operator.gif" alt="operator" />		</td>		<td class="members"><a href="#!/url=./si_om/ProjectItem.IsKindOf.html">IsKindOf</a>		</td>	</tr>

	<tr>

		<td class="members"><a href="#!/url=./si_om/ProjectItem.IsLocked.html">IsLocked</a> <img src="images/operator.gif" alt="operator" />		</td>		<td class="members"><a href="#!/url=./si_om/ProjectItem.IsSelected.html">IsSelected</a> <img src="images/operator.gif" alt="operator" />		</td>		<td class="members"><a href="#!/url=./si_om/ProjectItem.LockOwners.html">LockOwners</a>		</td>		<td class="members"><a href="#!/url=./si_om/ProjectItem.RemoveICEAttribute.html">RemoveICEAttribute</a>		</td>	</tr>

	<tr>

		<td class="members"><a href="#!/url=./si_om/ProjectItem.SetAsSelected.html">SetAsSelected</a> <img src="images/operator.gif" alt="operator" />		</td>		<td class="members"><a href="#!/url=./si_om/ProjectItem.SetCapabilityFlag.html">SetCapabilityFlag</a> <img src="images/operator.gif" alt="operator" />		</td>		<td class="members"><a href="#!/url=./si_om/ProjectItem.SetLock.html">SetLock</a>		</td>		<td class="members"><a href="#!/url=./si_om/ProjectItem.TaggedParameters.html">TaggedParameters</a>		</td>	</tr>

	<tr>

		<td class="members"><a href="#!/url=./si_om/ProjectItem.UnSetLock.html">UnSetLock</a>		</td>		<td class="members">&nbsp;		</td>		<td class="members">&nbsp;		</td>		<td class="members">&nbsp;		</td>	</tr>

	<tr>

		<td class="members">&nbsp;		</td>		<td class="members">&nbsp;		</td>		<td class="members">&nbsp;		</td>		<td class="members">&nbsp;		</td>	</tr>

</table>
</p></div>

<h3>Properties</h3>
<div><p><table>
	<tr>

		<td class="members"><a href="#!/url=./si_om/SIObject.Application.html">Application</a>		</td>		<td class="members"><a href="#!/url=./si_om/ProjectItem.BranchFlag.html">BranchFlag</a> <img src="images/operator.gif" alt="operator" />		</td>		<td class="members"><a href="#!/url=./si_om/ProjectItem.Capabilities.html">Capabilities</a> <img src="images/operator.gif" alt="operator" />		</td>		<td class="members"><a href="#!/url=./si_om/SIObject.Categories.html">Categories</a>		</td>	</tr>

	<tr>

		<td class="members"><a href="#!/url=./si_om/ClipContainer.Clips.html">Clips</a>		</td>		<td class="members"><a href="#!/url=./si_om/Clip.Effect.html">Effect</a>		</td>		<td class="members"><a href="#!/url=./si_om/ProjectItem.EvaluationID.html">EvaluationID</a>		</td>		<td class="members"><a href="#!/url=./si_om/ProjectItem.Families.html">Families</a> <img src="images/operator.gif" alt="operator" />		</td>	</tr>

	<tr>

		<td class="members"><a href="#!/url=./si_om/SIObject.FullName.html">FullName</a> <img src="images/operator.gif" alt="operator" />		</td>		<td class="members"><a href="#!/url=./si_om/SIObject.Help.html">Help</a>		</td>		<td class="members"><a href="#!/url=./si_om/ProjectItem.HierarchicalEvaluationID.html">HierarchicalEvaluationID</a>		</td>		<td class="members"><a href="#!/url=./si_om/ProjectItem.ICEAttributes.html">ICEAttributes</a>		</td>	</tr>

	<tr>

		<td class="members"><a href="#!/url=./si_om/ProjectItem.LockLevel.html">LockLevel</a> <img src="images/operator.gif" alt="operator" />		</td>		<td class="members"><a href="#!/url=./si_om/ProjectItem.LockMasters.html">LockMasters</a> <img src="images/operator.gif" alt="operator" />		</td>		<td class="members"><a href="#!/url=./si_om/ProjectItem.LockType.html">LockType</a> <img src="images/operator.gif" alt="operator" />		</td>		<td class="members"><a href="#!/url=./si_om/Clip.MappedItems.html">MappedItems</a>		</td>	</tr>

	<tr>

		<td class="members"><a href="#!/url=./si_om/ProjectItem.Model.html">Model</a>		</td>		<td class="members"><a href="#!/url=./si_om/SIObject.Name.html">Name</a> <img src="images/operator.gif" alt="operator" />		</td>		<td class="members"><a href="#!/url=./si_om/SIObject.NestedObjects.html">NestedObjects</a>		</td>		<td class="members"><a href="#!/url=./si_om/ClipContainer.NestedRelations.html">NestedRelations</a>		</td>	</tr>

	<tr>

		<td class="members"><a href="#!/url=./si_om/ProjectItem.ObjectID.html">ObjectID</a>		</td>		<td class="members"><a href="#!/url=./si_om/SIObject.Origin.html">Origin</a>		</td>		<td class="members"><a href="#!/url=./si_om/SIObject.OriginPath.html">OriginPath</a>		</td>		<td class="members"><a href="#!/url=./si_om/ProjectItem.Owners.html">Owners</a>		</td>	</tr>

	<tr>

		<td class="members"><a href="#!/url=./si_om/ProjectItem.PPGLayout.html">PPGLayout</a> <img src="images/operator.gif" alt="operator" />		</td>		<td class="members"><a href="#!/url=./si_om/ProjectItem.Parameters.html">Parameters</a> <img src="images/operator.gif" alt="operator" />		</td>		<td class="members"><a href="#!/url=./si_om/SIObject.Parent.html">Parent</a>		</td>		<td class="members"><a href="#!/url=./si_om/ProjectItem.Parent3DObject.html">Parent3DObject</a>		</td>	</tr>

	<tr>

		<td class="members"><a href="#!/url=./si_om/Clip.Properties.html">Properties</a>		</td>		<td class="members"><a href="#!/url=./si_om/Clip.Relations.html">Relations</a>		</td>		<td class="members"><a href="#!/url=./si_om/ProjectItem.Selected.html">Selected</a> <img src="images/operator.gif" alt="operator" />		</td>		<td class="members"><a href="#!/url=./si_om/Clip.Source.html">Source</a>		</td>	</tr>

	<tr>

		<td class="members"><a href="#!/url=./si_om/Clip.TimeControl.html">TimeControl</a>		</td>		<td class="members"><a href="#!/url=./si_om/ClipContainer.Tracks.html">Tracks</a>		</td>		<td class="members"><a href="#!/url=./si_om/ClipContainer.Transitions.html">Transitions</a>		</td>		<td class="members"><a href="#!/url=./si_om/SIObject.Type.html">Type</a> <img src="images/operator.gif" alt="operator" />		</td>	</tr>

</table>
</p></div>

<h3>Examples</h3>
<div><p><h4>1. JScript Example</h4><div class="example"><table>
<tr>
<td class="example"><pre class="jscript">/*
	This example demonstrates how to find all sources in the scene when there 
	are several levels of models all with their own sources. Something to note
	is that only ActionSources are returned from the Model.
*/
NewScene( null, false );
// Set up the scene (details are at the bottom of this example)
var m1 = ActiveSceneRoot.AddModel(); m1.Name = "Larry"
var m2 = m1.AddModel(); m2.Name = "Curly"
var m3 = m2.AddModel(); m3.Name = "Moe"
CreateModelSource( ActiveSceneRoot );
CreateImageSource(m1);
CreateShapeAction(m2);
CreateAudioSource(m3);
// Start with the top level model (the Scene_Root) and the use the Models property
// to search recursively. Since all action sources are stored under the model, once
// we've visited each model, we will have found each source in the scene.
LogMessage( "RecursiveModelSearch results: " + RecursiveModelSearch(ActiveSceneRoot) );
// Expected Results:
// INFO : MODEL: Scene_Root
// INFO : MODEL: Larry
// INFO : MODEL: Curly
// INFO : MODEL: Moe
// INFO : MODEL: Biped_Skeleton_Generated
// INFO : RecursiveModelSearch results: Curly.Mixer.ShapeKey,Curly.Mixer.Shape_ClusterClip_source,Curly.Mixer.ShapeKey1,Curly.Mixer.ShapeKey2
function RecursiveModelSearch( in_model )
{
	LogMessage( "MODEL: " + in_model.FullName );
	// Start with the top-level model
	// Get a comma-delimited string of all sources found under this model
	var foundsrcs = ( in_model.Sources ) ? in_model.Sources.GetAsText() : "";
	// For every model nested within this scene, check it for sources
	var mdl = new Enumerator( in_model.Models(true) );
	for ( ; ! mdl.atEnd(); mdl.moveNext() ) {
		LogMessage( "MODEL: " + mdl.item().FullName );
		var results = in_model.Sources;
		if ( results ) {
			foundsrcs += "," + mdl.item().Sources.GetAsText();
		}
	}
	// Correct any instances of a double or leading/trailing commas which may have 
	// occurred when reading a model with no sources
	foundsrcs = foundsrcs.replace( /,,/g, "," );
	foundsrcs = foundsrcs.replace( /^,/, "" );
	foundsrcs = foundsrcs.replace( /,$/, "" );
	// Return the string, which can be used by the caller to set an XSICollection,
	// populate a combo box, etc.
	return foundsrcs;
}
// This is an handy function to have around if you're going to create an action 
// source or clip on a parameter that is in a nested model (ie., not directly 
// under the Scene_Root) because AddClip will force a mapping template if your 
// parameter is not relative.
function GetRelativeNameForTarget( in_param )
{
	var mdlname = in_param.Model.FullName;
	if ( mdlname == "Scene_Root" ) {
		return in_param.FullName;
	} else {
		var tmp = in_param.FullName;
		var re = new RegExp( mdlname + ".", "i" );
		return tmp.replace( re, "" );
	}
}
// Helper functions to create &amp; instantiate sources
function CreateShapeAction( in_model )
{
	var obj = in_model.AddGeometry( "Cone", "MeshSurface" );
	var target = obj + ".pnt[0,2,5,8,11,14,17,20,23]"
	SetSelFilter( "Vertex" );
	SelectGeometryComponents( target );
	Translate( null, 0, -2, 0, siAbsolute, siPivot, siObj, siY, null, 
		null, null, null, null, null, null, null, null, 1 );
	var clip = SaveShapeKey( target, null, null, 1, null, null, null, 
		null, siShapeObjectReferenceMode );
	Translate( null, 0, -1, 0, siAbsolute, siPivot, siObj, siY, null, 
		null, null, null, null, null, null, null, null, 1 );
	SaveShapeKey( target, null, null, 36, null, null, null, null, 
		siShapeObjectReferenceMode );
	Translate( null, 0, 0, 0, siAbsolute, siPivot, siObj, siY, null, 
		null, null, null, null, null, null, null, null, 1 );
	SaveShapeKey( target, null, null, 67, null, null, null, null, 
		siShapeObjectReferenceMode );
}
function CreateAudioSource( in_model )
{
	var mixmaster = ( in_model.HasMixer() ) ? in_model.Mixer : in_model.AddMixer();
	var aud_track = AddTrack( in_model, mixmaster, 2 );
	var aud_path = XSIUtils.BuildPath(
		Application.InstallationPath(siFactoryPath),
		"Data", "XSI_SAMPLES", "Audio", "Torefaction.wav"
	);
	var aud_src = ImportAudio( in_model, aud_path );
	AddAudioClip( in_model, aud_src, mixmaster, aud_track, 22 );
}
function CreateImageSource( in_model )
{
	var cube = in_model.AddGeometry( "Cube", "MeshSurface" );
	SelectObj( cube );
	ApplyShader( null, null, null, siUnspecified, siLetLocalMaterialsOverlap );
	CreateProjection( cube, siTxtSpherical, siTxtDefaultSpherical, "", "Texture_Projection", null, siRelDefault, "" );
	BlendInTextureLayers( "Image", cube, 1, false, siReplaceAndBlendInPreset, true, true, false, false);
}
function CreateModelSource()
{
	ImportModel( "S:\\Data\\XSI_SAMPLES\\Models\\Biped_Skeleton_Generated.emdl", null, true, 
		null, null, null, null );
}</pre></td></tr>
</table>
</div><h4>2. Python Example</h4><div class="example"><table>
<tr>
<td class="example"><pre class="python"># 
# This example demonstrates how to access every clip in the specified model. 
# In this case there are two clips in different models and only the top 
# model has been queried, so only the constraint action will be returned
#
def FindClipsUnderModel( in_model ) :
	# First make sure we have a mixer
	if  in_model.HasMixer()==0 :
		return ""
	mixer = in_model.Mixer
	# We will return a comma-delimited string of all sources found
	foundclips = ""
	Application.LogMessage( "\n\tSearching " + mixer.FullName + " for clips...", c.siComment );
	if mixer.Clips.Count &gt; 0 :
		for clip in mixer.Clips :
			Application.LogMessage( "\t" + clip.FullName + " is a " + ClassName(clip) + "/" + clip.Type, c.siComment )
			if foundclips == "" :
				foundclips = foundclips + clip.FullName 
			else : 
				foundclips = foundclips + "," + clip.FullName
	else :
		Application.LogMessage( "\tNo sources found on " + mixer.FullName, c.siComment )
	return foundclips
# Helper function to strip off model name for FullNames
def GetRelativeNameForTarget( in_param ) :
	mdlname = in_param.Model.FullName
	if  mdlname == "Scene_Root" :
		return in_param.FullName
	else :
		tmp = in_param.FullName
		return tmp.replace( mdlname + ".", "" )
# Helper function to create constraint-based action
def CreateConstraintAction( in_model ) :
	# Build Orientation Constraint to null from cylinder
	a = in_model.AddNull()
	Application.SelectObj(a)
	Application.Translate("", 5.5173674053756, 2.96222253259053, 
		-0.296222253259053, c.siRelative, c.siView, c.siObj, 
		c.siXYZ, "", "", "", "", "", "", "", "", "", 1)
	b = in_model.AddGeometry("Cylinder", "MeshSurface" )
	Application.SetUserPref( "SI3D_CONSTRAINT_COMPENSATION_MODE", 1)
	Application.ApplyCns( "Orientation", b, a, 1 )
	Application.SetUserPref( "SI3D_CONSTRAINT_COMPENSATION_MODE", 0 )
	# Relative names (needed for AddClip under a nested model)
	relB = GetRelativeNameForTarget( b )
	# Make it into an Action (constraints are always on global Kinematics)
	# Get list of parameters to mark
	params = relB + "*/.kine.global.ori.euler"
	Application.StoreAction( in_model, params, 4, 
		"StoredAnimCnsAction", 1, 1, 100, 0, 0, 1, 1 )
# Helper function to create fcurve-based action
def CreateFCurveAction( in_model ) :
	obj = in_model.AddNull()
	# Set FCurves on the null's scaling
	keys = [ 5, 1.2,  20, 1.7,  45, 2.0,  90, 2.5 ]
	obj.sclx.AddFCurve2( keys )
	keyfactor = 0.66
	posfactor = 0.54
	i=0
	while i &lt; len(keys) :
		keys[i] = keys[i] + keyfactor
		keys[i+1] = keys[i+1] * posfactor
		i = i + 2
	obj.scly.AddFCurve2( keys )
	keyfactor = 0.27
	posfactor = 0.44
	while i &lt; len(keys) :
		keys[i] = keys[i] - keyfactor
		keys[i+1] = keys[i+1] * posfactor
		i = i + 2
	obj.sclz.AddFCurve2( keys )
	# Get list of parameters to mark
	params = obj.sclx.FullName + "," + obj.scly.FullName + "," + obj.sclz.FullName
	# Make the FCurves into an Action
	src = Application.StoreAction( in_model, params, 2, "StoredAnimFCrvAction" )
	clip = Application.AddClip( in_model, src )
	# Add some clip effects to it
	toclip = clip.Name + ".ActionClip"
	rtn = Application.GetMappingRule( toclip, 0 )
	fromclip = rtn.Value( "From" )
	Application.SetMappingRule( toclip, fromclip, "this+5", 1 )
# ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
# 	MAIN
#
Application.NewScene( "", 0)
from win32com.client import constants as c
# Set up some animation action nested inside models (see bottom for functions)
CreateFCurveAction( Application.ActiveSceneRoot )
m1 = Application.ActiveSceneRoot.AddModel()
m1.Name = "Sunshine"
CreateConstraintAction( m1 )
# Get a collection of clips under every model
results = FindClipsUnderModel( Application.ActiveSceneRoot )
if results != "" :
	cliplist = XSIFactory.CreateActiveXObject( "XSI.Collection" )
	cliplist.AddItems( results )
# Print out list
for clip in cliplist :
	Application.LogMessage( clip.Name + " is a " + clip.Type )
# Expected results:
#
#	Searching Mixer for clips...
#	Mixer.Mixer_Anim_Track.StoredAnimFCrvAction_Clip is a Clip/mixeranimclip
#INFO : StoredAnimFCrvAction_Clip is a mixeranimclip</pre></td></tr>
</table>
</div><h4>3. VBScript Example</h4><div class="example"><table>
<tr>
<td class="example"><pre class="vbscript">'
' This example demonstrates how to crawl through the Mixer to try and extract
' all the interesting pieces of data, through clips, sources, tracks, etc.
'
NewScene , false
' Set up some clips in the mixer
CreateStaticAction( ActiveSceneRoot )
CreateShapeAction( ActiveSceneRoot )
CreateAudioSource( ActiveSceneRoot )
' Traverse the mixer, finding as much info as we can
ReadMixerContents ActiveSceneRoot.Mixer
sub ReadMixerContents( in_mixer )
	LogMessage vbTab &amp; "Reading " &amp; in_mixer.FullName &amp; " in ReadMixerContents()" 
	' CLIPS
	LogMessage vbTab &amp; vbTab &amp; "Found " &amp; in_mixer.Clips.Count &amp; " clip(s)."
	ReadClipsFromContainer in_mixer 
	' TRACKS
	LogMessage vbTab &amp; vbTab &amp; "Found " &amp; in_mixer.Tracks.Count &amp; " track(s)."
	for each trk in in_mixer.Tracks
		' TRACKS::CLIPS
		ReadClipsFromContainer trk 
	next
	' TRANSITIONS
	LogMessage vbTab &amp; vbTab &amp; "Found " &amp; in_mixer.Transitions.Count &amp; " transition(s)."
	for each trns in in_mixer.Transitions
		LogMessage vbTab &amp; vbTab &amp; vbTab &amp; "Found the " &amp; trns.FullName &amp;  _
			" transition which starts at frame " &amp; trns.StartClip &amp;  _
			" and ends at frame " &amp; trns.EndClip
	next
	' NESTED RELATIONS
	LogMessage vbTab &amp; vbTab &amp; "Found " &amp; in_mixer.NestedRelations.Count &amp; " nested relation(s)."
	if in_mixer.NestedRelations.Count &gt; 0 then
		ReadRelations in_mixer.NestedRelations
	end if
end sub
sub ReadClipsFromContainer( in_can )
	LogMessage vbTab &amp; "Reading " &amp; in_can.FullName &amp; " in ReadClipsFromContainer()"
	for each clp in in_can.Clips
		' MAPPEDITEMS
		if clp.Type &lt;&gt; siClipAudioType then
			if TypeName(clp.MappedItems) &lt;&gt; "Nothing" then
				LogMessage vbTab &amp; vbTab &amp; "Found " &amp; clp.MappedItems.Count &amp; " mapped items(s)"
				for each mapping in clp.MappedItems
					LogMessage vbTab &amp; vbTab &amp; vbTab &amp; mapping.FullName &amp; ": " &amp; ClassName(mapping)
					' MAPPEDITEMS::CLIPEFFECTITEM
					ReadClipEffectItem mapping.ClipEffectItem 
				next
			end if
		end if
		' TIMECONTROL
		if  TypeName(clp.TimeControl) &lt;&gt; "Nothing" then
			LogMessage vbTab &amp; vbTab &amp; "Found this clip's time control: " &amp; clp.TimeControl.FullName
			set tc = clp.TimeControl
			LogMessage vbTab &amp; vbTab &amp; vbTab &amp; "Scaling Factor: " &amp; tc.Scale 
			LogMessage vbTab &amp; vbTab &amp; vbTab &amp; "Start Offset: " &amp; tc.StartOffset 
			LogMessage vbTab &amp; vbTab &amp; vbTab &amp; "First Frame: " &amp; tc.ClipIn 
			LogMessage vbTab &amp; vbTab &amp; vbTab &amp; "Last Frame: " &amp; tc.ClipOut 
			LogMessage vbTab &amp; vbTab &amp; vbTab &amp; "siTimeControlExtrapolationType before this clip: " _
				&amp; tc.ExtrapolationBeforeType &amp; " (" &amp; tc.ExtrapolationBeforeValue &amp; ")" 
			LogMessage vbTab &amp; vbTab &amp; vbTab &amp; "siTimeControlExtrapolationType after this clip: " _
				&amp; tc.ExtrapolationAfterType &amp; " (" &amp; tc.ExtrapolationAfterValue &amp; ")" 
		else
			LogMessage vbTab &amp; "TimeControl is not available on this clip."
		end if
		' SOURCE
		LogMessage vbTab &amp; vbTab &amp; "Found this clip's source: " &amp; clp.Source.FullName &amp; "(" &amp; ClassName(clp.Source) &amp; ")"
		' EFFECT
		if TypeName(clp.Effect) &lt;&gt; "Nothing" then
			LogMessage vbTab &amp; vbTab &amp; "Found this clip's effect: " &amp; clp.Effect.FullName 
			ReadClipEffect clp.Effect 
		end if
		' RELATIONS
		LogMessage vbTab &amp; vbTab &amp; "Found " &amp; clp.Relations.Count &amp; " relation(s) on this clip." 
		ReadRelations clp.Relations 
	next
end sub
sub ReadClipEffect( in_clpeff )
	LogMessage vbTab &amp; "Reading " &amp; in_clpeff.FullName &amp; " in ReadClipEffect()"
	' CLIPEFFECTITEMS
	LogMessage vbTab &amp; vbTab &amp; "Found " &amp; in_clpeff.Items.Count &amp; " clip effect item(s)" 
	for each thing in in_clpeff.Items
		ReadClipEffectItem thing
	next
	' VARIABLES
	LogMessage vbTab &amp; vbTab &amp; "Found " &amp; in_clpeff.Variables.Count &amp; " variables(s)" 
	if  in_clpeff.Variables.Count &gt; 0 then
		for each var in in_clpeff.Variables
			LogMessage vbTab &amp; vbTab &amp; vbTab &amp; "Found this variable on the clip effect: " &amp; var.FullName
		next
	end if
	' TIMEREFERENCE
	if TypeName(in_clpeff.TimeReference) &lt;&gt; "Nothing" then
		dim trparams
		if in_clpeff.TimeReference then
			trparams = "spans over extrapolation (siExtrapolatedClip)"
		else 
			trparams = "repeats itself over time (siOriginalClip)"
		end if
		LogMessage vbTab &amp; vbTab &amp; "Found this time reference indicating that this clip effect item: " &amp; trparams 
	else
		LogMessage vbTab &amp; vbTab &amp; "No time reference found on the clip effect" 
	end if
	' POSEEFFECT
	if TypeName(in_clpeff.PoseEffect) &lt;&gt; "Nothing" then
		LogMessage vbTab &amp; vbTab &amp; "Found this pose effect property on the clip effect: " _
			&amp; in_clpeff.PoseEffect.FullName &amp; " containing " _
			&amp; in_clpeff.PoseEffect.Parameters.Count &amp; " parameters...."
		set peparams = in_clpeff.PoseEffect.Parameters
		for each p in peparams
			LogMessage vbTab &amp; vbTab &amp; vbTab &amp; "Found this parameter on the pose effect property: " &amp; p.FullName 
		next
	else
		LogMessage vbTab &amp; vbTab &amp; "No pose effect property found on the clip effect" 
	end if
	' ISACTIVE
	LogMessage vbTab &amp; vbTab &amp; "Is this clip effect active? -- " &amp; in_clpeff.IsActive 
	' ISPOSEEFFECTACTIVE
	LogMessage vbTab &amp; vbTab &amp; "Is the pose effect on this clip effect active? -- " &amp; in_clpeff.IsPoseEffectActive 
end sub
sub ReadRelations( in_rels )
	LogMessage vbTab &amp; "Reading " &amp; in_rels.GetAsText() &amp; " in ReadRelations()" 
	for each rel in in_rels
		LogMessage vbTab &amp; vbTab &amp; vbTab &amp; "Master: " &amp; in_rels(r).MasterClip
		LogMessage vbTab &amp; vbTab &amp; vbTab &amp; "Slave: " &amp; in_rels(r).SlaveClip
	next
end sub
sub ReadClipEffectItem( in_clpeffitm )
	LogMessage vbTab &amp; vbTab &amp; "Reading " &amp; in_clpeffitm.FullName &amp; " in ReadClipEffectItem()" 
	LogMessage vbTab &amp; vbTab &amp; vbTab &amp; "Value of " &amp; in_clpeffitm.Parameter.FullName &amp; " = " &amp; in_clpeffitm.Parameter.Value 
	dim str 
	if in_clpeffitm.Expression = "" then
		str = "(no expression)" 
	else
		str = in_clpeffitm.Expression
	end if
	LogMessage vbTab &amp; vbTab &amp; vbTab &amp; "Value of ClipEffectItem.Expression = " &amp; str 
end sub
' Expected Results:
'INFO : 	Reading Mixer in ReadMixerContents()
'INFO : 		Found 2 clip(s).
'INFO : 	Reading Mixer in ReadClipsFromContainer()
'INFO : 		Found 1 mapped items(s)
'INFO : 			MappedItem: MappedItem
'INFO : 		Reading  in ReadClipEffectItem()
'INFO : 			Value of Mixer.Mixer_Shape_Track.Shape_ClusterClip.actionclip.param = 0
'INFO : 			Value of ClipEffectItem.Expression = (no expression)
'INFO : 		Found this clip's time control: Mixer.Mixer_Shape_Track.Shape_ClusterClip.actionclip.timectrl
'INFO : 			Scaling Factor: 1
'INFO : 			Start Offset: 1
'INFO : 			First Frame: 1
'INFO : 			Last Frame: 100
'INFO : 			siTimeControlExtrapolationType before this clip: 0 (0)
'INFO : 			siTimeControlExtrapolationType after this clip: 0 (0)
'INFO : 		Found this clip's source: Mixer.Shape_ClusterClip_source(ActionSource)
'INFO : 		Found this clip's effect: 
'INFO : 	Reading  in ReadClipEffect()
'INFO : 		Found 1 clip effect item(s)
'INFO : 		Reading  in ReadClipEffectItem()
'INFO : 			Value of Mixer.Mixer_Shape_Track.Shape_ClusterClip.actionclip.param = 0
'INFO : 			Value of ClipEffectItem.Expression = (no expression)
'INFO : 		Found 0 variables(s)
'INFO : 		Found this time reference indicating that this clip effect item: spans over extrapolation (siExtrapolatedClip)
'INFO : 		Found this pose effect property on the clip effect: Mixer.Mixer_Shape_Track.Shape_ClusterClip.actionclip.StaticKineState containing 9 parameters....
'INFO : 			Found this parameter on the pose effect property: Mixer.Mixer_Shape_Track.Shape_ClusterClip.actionclip.StaticKineState.sclx
'INFO : 			Found this parameter on the pose effect property: Mixer.Mixer_Shape_Track.Shape_ClusterClip.actionclip.StaticKineState.scly
'INFO : 			Found this parameter on the pose effect property: Mixer.Mixer_Shape_Track.Shape_ClusterClip.actionclip.StaticKineState.sclz
'INFO : 			Found this parameter on the pose effect property: Mixer.Mixer_Shape_Track.Shape_ClusterClip.actionclip.StaticKineState.posx
'INFO : 			Found this parameter on the pose effect property: Mixer.Mixer_Shape_Track.Shape_ClusterClip.actionclip.StaticKineState.posy
'INFO : 			Found this parameter on the pose effect property: Mixer.Mixer_Shape_Track.Shape_ClusterClip.actionclip.StaticKineState.posz
'INFO : 			Found this parameter on the pose effect property: Mixer.Mixer_Shape_Track.Shape_ClusterClip.actionclip.StaticKineState.orix
'INFO : 			Found this parameter on the pose effect property: Mixer.Mixer_Shape_Track.Shape_ClusterClip.actionclip.StaticKineState.oriy
'INFO : 			Found this parameter on the pose effect property: Mixer.Mixer_Shape_Track.Shape_ClusterClip.actionclip.StaticKineState.oriz
'INFO : 		Is this clip effect active? -- True
'INFO : 		Is the pose effect on this clip effect active? -- False
'INFO : 		Found 0 relation(s) on this clip.
'INFO : 	Reading  in ReadRelations()
'INFO : 		Found this clip's time control: Mixer.Mixer_Audio_Track.Clip.timectrl
'INFO : 			Scaling Factor: 1
'INFO : 			Start Offset: 22
'INFO : 			First Frame: 1
'INFO : 			Last Frame: 6.87475789516606
'INFO : 			siTimeControlExtrapolationType before this clip: 0 (0)
'INFO : 			siTimeControlExtrapolationType after this clip: 0 (0)
'INFO : 		Found this clip's source: Sources.NEWALERT_WAV(Source)
'INFO : 		Found 0 relation(s) on this clip.
'INFO : 	Reading  in ReadRelations()
'INFO : 		Found 2 track(s).
'INFO : 	Reading Mixer.Mixer_Shape_Track in ReadClipsFromContainer()
'INFO : 		Found 1 mapped items(s)
'INFO : 			MappedItem: MappedItem
'INFO : 		Reading  in ReadClipEffectItem()
'INFO : 			Value of Mixer.Mixer_Shape_Track.Shape_ClusterClip.actionclip.param = 0
'INFO : 			Value of ClipEffectItem.Expression = (no expression)
'INFO : 		Found this clip's time control: Mixer.Mixer_Shape_Track.Shape_ClusterClip.actionclip.timectrl
'INFO : 			Scaling Factor: 1
'INFO : 			Start Offset: 1
'INFO : 			First Frame: 1
'INFO : 			Last Frame: 100
'INFO : 			siTimeControlExtrapolationType before this clip: 0 (0)
'INFO : 			siTimeControlExtrapolationType after this clip: 0 (0)
'INFO : 		Found this clip's source: Mixer.Shape_ClusterClip_source(ActionSource)
'INFO : 		Found this clip's effect: 
'INFO : 	Reading  in ReadClipEffect()
'INFO : 		Found 1 clip effect item(s)
'INFO : 		Reading  in ReadClipEffectItem()
'INFO : 			Value of Mixer.Mixer_Shape_Track.Shape_ClusterClip.actionclip.param = 0
'INFO : 			Value of ClipEffectItem.Expression = (no expression)
'INFO : 		Found 0 variables(s)
'INFO : 		Found this time reference indicating that this clip effect item: spans over extrapolation (siExtrapolatedClip)
'INFO : 		Found this pose effect property on the clip effect: Mixer.Mixer_Shape_Track.Shape_ClusterClip.actionclip.StaticKineState containing 9 parameters....
'INFO : 			Found this parameter on the pose effect property: Mixer.Mixer_Shape_Track.Shape_ClusterClip.actionclip.StaticKineState.sclx
'INFO : 			Found this parameter on the pose effect property: Mixer.Mixer_Shape_Track.Shape_ClusterClip.actionclip.StaticKineState.scly
'INFO : 			Found this parameter on the pose effect property: Mixer.Mixer_Shape_Track.Shape_ClusterClip.actionclip.StaticKineState.sclz
'INFO : 			Found this parameter on the pose effect property: Mixer.Mixer_Shape_Track.Shape_ClusterClip.actionclip.StaticKineState.posx
'INFO : 			Found this parameter on the pose effect property: Mixer.Mixer_Shape_Track.Shape_ClusterClip.actionclip.StaticKineState.posy
'INFO : 			Found this parameter on the pose effect property: Mixer.Mixer_Shape_Track.Shape_ClusterClip.actionclip.StaticKineState.posz
'INFO : 			Found this parameter on the pose effect property: Mixer.Mixer_Shape_Track.Shape_ClusterClip.actionclip.StaticKineState.orix
'INFO : 			Found this parameter on the pose effect property: Mixer.Mixer_Shape_Track.Shape_ClusterClip.actionclip.StaticKineState.oriy
'INFO : 			Found this parameter on the pose effect property: Mixer.Mixer_Shape_Track.Shape_ClusterClip.actionclip.StaticKineState.oriz
'INFO : 		Is this clip effect active? -- True
'INFO : 		Is the pose effect on this clip effect active? -- False
'INFO : 		Found 0 relation(s) on this clip.
'INFO : 	Reading  in ReadRelations()
'INFO : 	Reading Mixer.Mixer_Audio_Track in ReadClipsFromContainer()
'INFO : 		Found this clip's time control: Mixer.Mixer_Audio_Track.Clip.timectrl
'INFO : 			Scaling Factor: 1
'INFO : 			Start Offset: 22
'INFO : 			First Frame: 1
'INFO : 			Last Frame: 6.87475789516606
'INFO : 			siTimeControlExtrapolationType before this clip: 0 (0)
'INFO : 			siTimeControlExtrapolationType after this clip: 0 (0)
'INFO : 		Found this clip's source: Sources.NEWALERT_WAV(Source)
'INFO : 		Found 0 relation(s) on this clip.
'INFO : 	Reading  in ReadRelations()
'INFO : 		Found 0 transition(s).
'INFO : 		Found 0 nested relation(s).
' Helper routines to create the sources
sub CreateStaticAction( in_model )
	set obj = in_model.AddGeometry( "Cone", "MeshSurface" )
	targets = Array( obj.rotx.FullName, obj.roty.FullName, obj.rotz.FullName )
	statics = Array( 22.5, 90, 45 )
	actives = Array( true, true, true )
	in_model.AddActionSource "StoredAnimStaticAction", targets, statics, actives 
end sub
sub CreateShapeAction( in_model )
	set obj = in_model.AddGeometry( "Cone", "MeshSurface" )
	target = obj &amp; ".pnt[0,2,5,8,11,14,17,20,23]"
	SetSelFilter "Vertex" 
	SelectGeometryComponents target 
	Translate , 0, -2, 0, siAbsolute, siPivot, siObj, siY, , , , , , , , , , 1 
	set clip = SaveShapeKey( target, , , 1, , , , , siShapeObjectReferenceMode )
	target = clip.Source.SourceItems(0).Target
	Translate , 0, -1, 0, siAbsolute, siPivot, siObj, siY, , , , , , , , , , 1 
	SaveShapeKey target, , , 36, , , , , siShapeObjectReferenceMode 
	Translate , 0, 0, 0, siAbsolute, siPivot, siObj, siY, , , , , , , , , , 1 
	SaveShapeKey target, , , 67, , , , , siShapeObjectReferenceMode 
end sub
sub CreateAudioSource( in_model )
	if in_model.HasMixer() then
		set mixmaster = in_model.Mixer 
	else
		set mixmaster = in_model.AddMixer()
	end if
	set aud_track = AddTrack( in_model, mixmaster, 2 )
	var aud_src_path = XSIUtils.BuildPath( Application.InstallationPath( siFactoryPath ), "Data", "XSI_SAMPLES", "Audio", "Torefaction.wav" );
var aud_src = ImportAudio( mdl, aud_src_path );
	AddAudioClip in_model, aud_src, mixmaster, aud_track, 22 
end sub</pre></td></tr>
</table>
</div></p></div>

<h3>See Also</h3>
<div><p><a href="#!/url=./si_om/Model.HasMixer.html">Model.HasMixer</a> <a href="#!/url=./si_om/Model.AddMixer.html">Model.AddMixer</a> <a href="#!/url=./si_om/Model.Mixer.html">Model.Mixer</a></p></div>

      <div class="footer-block"><a href="../html/ac.cmtdialog.htm" class="comments-anchor" target="_blank"><span class="comments-link">Please send us your comment about this page</span></a></div><br /></h3></h3></div>
   </div></body>
</html>
